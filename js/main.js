/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},h="undefined"!==typeof module&&module.exports,b=function(){for(var l,f=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],g=0,k=f.length,q={};g<k;g++)if((l=f[g])&&l[1]in a){for(g=0;g<l.length;g++)q[f[0][g]]=l[g];return q}return!1}(),e={change:b.fullscreenchange,error:b.fullscreenerror},c={request:function(l){return new Promise(function(f,g){var k=function(){this.off("change",
k);f()}.bind(this);this.on("change",k);l=l||a.documentElement;Promise.resolve(l[b.requestFullscreen]())["catch"](g)}.bind(this))},exit:function(){return new Promise(function(l,f){if(this.isFullscreen){var g=function(){this.off("change",g);l()}.bind(this);this.on("change",g);Promise.resolve(a[b.exitFullscreen]())["catch"](f)}else l()}.bind(this))},toggle:function(l){return this.isFullscreen?this.exit():this.request(l)},onchange:function(l){this.on("change",l)},onerror:function(l){this.on("error",l)},
on:function(l,f){var g=e[l];g&&a.addEventListener(g,f,!1)},off:function(l,f){var g=e[l];g&&a.removeEventListener(g,f,!1)},raw:b};b?(Object.defineProperties(c,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),h?module.exports=c:window.screenfull=c):h?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(n){n=String(n);return n.charAt(0).toUpperCase()+n.slice(1)}function h(n,I){var z=-1,E=n?n.length:0;if("number"==typeof E&&-1<E&&E<=u)for(;++z<E;)I(n[z],z,n);else e(n,I)}function b(n){n=String(n).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(n)?n:a(n)}function e(n,I){for(var z in n)A.call(n,z)&&I(n[z],z,n)}function c(n){return null==n?a(n):v.call(n).slice(8,-1)}function l(n,I){var z=null!=n?typeof n[I]:"number";return!/^(?:boolean|number|string|undefined)$/.test(z)&&
("object"==z?!!n[I]:!0)}function f(n){return String(n).replace(/([ -])(?!$)/g,"$1?")}function g(n,I){var z=null;h(n,function(E,G){z=I(z,E,G,n)});return z}function k(n){function I(aa){return g(aa,function(W,U){var d=U.pattern||f(U);!W&&(W=RegExp("\\b"+d+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+d+" *\\w+-[\\w]*","i").exec(n)||RegExp("\\b"+d+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))&&((W=String(U.label&&!RegExp(d,"i").test(U.label)?U.label:W).split("/"))[1]&&!/[\d.]+/.test(W[0])&&
(W[0]+=" "+W[1]),U=U.label||U,W=b(W[0].replace(RegExp(d,"i"),U).replace(RegExp("; *(?:"+U+"[_-])?","i")," ").replace(RegExp("("+U+")[-_.]?(\\w)","i"),"$1 $2")));return W})}function z(aa){return g(aa,function(W,U){return W||(RegExp(U+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null})}var E=p,G=n&&"object"==typeof n&&"String"!=c(n);G&&(E=n,n=null);var D=E.navigator||{},y=D.userAgent||"";n||(n=y);var ba=G?!!D.likeChrome:/\bChrome\b/.test(n)&&!/internal|\n/i.test(v.toString()),
L=G?"Object":"ScriptBridgingProxyObject",Z=G?"Object":"Environment",ca=G&&E.java?"JavaPackage":c(E.java),X=G?"Object":"RuntimeObject";Z=(ca=/\bJava/.test(ca)&&E.java)&&c(E.environment)==Z;var Y=ca?"a":"\u03b1",fa=ca?"b":"\u03b2",H=E.document||{},Q=E.operamini||E.opera,O=x.test(O=G&&Q?Q["[[Class]]"]:c(Q))?O:Q=null,m,M=n;G=[];var S=null,V=n==y;y=V&&Q&&"function"==typeof Q.version&&Q.version();var N=function(aa){return g(aa,function(W,U){return W||RegExp("\\b"+(U.pattern||f(U))+"\\b","i").exec(n)&&(U.label||
U)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),F=function(aa){return g(aa,function(W,U){return W||RegExp("\\b"+(U.pattern||f(U))+"\\b","i").exec(n)&&(U.label||U)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),T=I([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),da=function(aa){return g(aa,function(W,U,d){return W||(U[T]||U[/^[a-z]+(?: +[a-z]+\b)*/i.exec(T)]||RegExp("\\b"+f(d)+"(?:\\b|\\w*\\d)","i").exec(n))&&d})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),J=function(aa){return g(aa,function(W,U){var d=U.pattern||f(U);if(!W&&(W=RegExp("\\b"+d+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))){var w=W,C=U.label||U,K={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};d&&C&&/^Win/i.test(w)&&!/^Windows Phone /i.test(w)&&(K=K[/[\d.]+$/.exec(w)])&&(w="Windows "+K);w=String(w);d&&C&&(w=w.replace(RegExp(d,"i"),C));W=w=b(w.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return W})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);N&&(N=[N]);da&&!T&&(T=I([da]));if(m=/\bGoogle TV\b/.exec(T))T=m[0];/\bSimulator\b/i.test(n)&&(T=(T?T+" ":"")+"Simulator");"Opera Mini"==F&&/\bOPiOS\b/.test(n)&&G.push("running in Turbo/Uncompressed mode");"IE"==F&&/\blike iPhone OS\b/.test(n)?(m=k(n.replace(/like iPhone OS/,"")),da=m.manufacturer,T=m.product):/^iP/.test(T)?(F||(F="Safari"),J="iOS"+((m=/ OS ([\d_]+)/i.exec(n))?" "+m[1].replace(/_/g,"."):"")):"Konqueror"!=F||/buntu/i.test(J)?da&&"Google"!=da&&(/Chrome/.test(F)&&
!/\bMobile Safari\b/i.test(n)||/\bVita\b/.test(T))||/\bAndroid\b/.test(J)&&/^Chrome/.test(F)&&/\bVersion\//i.test(n)?(F="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==F?(/\bMobi/i.test(n)||(J="Android",G.unshift("desktop mode")),/Accelerated *= *true/i.test(n)&&G.unshift("accelerated")):"PaleMoon"==F&&(m=/\bFirefox\/([\d.]+)\b/.exec(n))?G.push("identifying as Firefox "+m[1]):"Firefox"==F&&(m=/\b(Mobile|Tablet|TV)\b/i.exec(n))?(J||(J="Firefox OS"),T||(T=m[1])):!F||(m=!/\bMinefield\b/i.test(n)&&
/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!T&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(m+"/")+8))&&(F=null),(m=T||da||J)&&(T||da||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:m)+" Browser")):"Electron"==F&&(m=(/\bChrome\/([\d.]+)\b/.exec(n)||0)[1])&&G.push("Chromium "+m):J="Kubuntu";y||(y=z(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",f(F),"(?:Firefox|Minefield|NetFront)"]));
if(m="iCab"==N&&3<parseFloat(y)&&"WebKit"||/\bOpera\b/.test(F)&&(/\bOPR\b/.test(n)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(n)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")N=[m];"IE"==F&&(m=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])?(F+=" Mobile",J="Windows Phone "+(/\+$/.test(m)?m:m+".x"),G.unshift("desktop mode")):/\bWPDesktop\b/i.test(n)?(F="IE Mobile",J="Windows Phone 8.x",
G.unshift("desktop mode"),y||(y=(/\brv:([\d.]+)/.exec(n)||0)[1])):"IE"!=F&&"Trident"==N&&(m=/\brv:([\d.]+)/.exec(n))&&(F&&G.push("identifying as "+F+(y?" "+y:"")),F="IE",y=m[1]);if(V){if(l(E,"global"))if(ca&&(m=ca.lang.System,M=m.getProperty("os.arch"),J=J||m.getProperty("os.name")+" "+m.getProperty("os.version")),Z){try{y=E.require("ringo/engine").version.join("."),F="RingoJS"}catch(aa){(m=E.system)&&m.global.system==E.system&&(F="Narwhal",J||(J=m[0].os||null))}F||(F="Rhino")}else"object"==typeof E.process&&
!E.process.browser&&(m=E.process)&&("object"==typeof m.versions&&("string"==typeof m.versions.electron?(G.push("Node "+m.versions.node),F="Electron",y=m.versions.electron):"string"==typeof m.versions.nw&&(G.push("Chromium "+y,"Node "+m.versions.node),F="NW.js",y=m.versions.nw)),F||(F="Node.js",M=m.arch,J=m.platform,y=(y=/[\d.]+/.exec(m.version))?y[0]:null));else c(m=E.runtime)==L?(F="Adobe AIR",J=m.flash.system.Capabilities.os):c(m=E.phantom)==X?(F="PhantomJS",y=(m=m.version||null)&&m.major+"."+m.minor+
"."+m.patch):"number"==typeof H.documentMode&&(m=/\bTrident\/(\d+)/i.exec(n))?(y=[y,H.documentMode],(m=+m[1]+4)!=y[1]&&(G.push("IE "+y[1]+" mode"),N&&(N[1]=""),y[1]=m),y="IE"==F?String(y[1].toFixed(1)):y[0]):"number"==typeof H.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(G.push("masking as "+F+" "+y),F="IE",y="11.0",N=["Trident"],J="Windows");J=J&&b(J)}y&&(m=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(y)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(V&&D.appMinorVersion))||/\bMinefield\b/i.test(n)&&
"a")&&(S=/b/i.test(m)?"beta":"alpha",y=y.replace(RegExp(m+"\\+?$"),"")+("beta"==S?fa:Y)+(/\d+\+?/.exec(m)||""));if("Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS)\b/.test(J))F="Firefox Mobile";else if("Maxthon"==F&&y)y=y.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(T))"Xbox 360"==T&&(J=null),"Xbox 360"==T&&/\bIEMobile\b/.test(n)&&G.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||T||/Browser|Mobi/.test(F))||"Windows CE"!=J&&!/Mobi/i.test(n))if("IE"==F&&V)try{null===
E.external&&G.unshift("platform preview")}catch(aa){G.unshift("embedded")}else(/\bBlackBerry\b/.test(T)||/\bBB10\b/.test(n))&&(m=(RegExp(T.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||y)?(m=[m,/BB10/.test(n)],J=(m[1]?(T=null,da="BlackBerry"):"Device Software")+" "+m[0],y=null):this!=e&&"Wii"!=T&&(V&&Q||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(n)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==F&&(J&&!/^Win/.test(J)&&5.5<y||/\bWindows XP\b/.test(J)&&8<y||8==y&&!/\bTrident\b/.test(n)))&&
!x.test(m=k.call(e,n.replace(x,"")+";"))&&m.name&&(m="ing as "+m.name+((m=m.version)?" "+m:""),x.test(F)?(/\bIE\b/.test(m)&&"Mac OS"==J&&(J=null),m="identify"+m):(m="mask"+m,F=O?b(O.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(m)&&(J=null),V||(y=null)),N=["Presto"],G.push(m));else F+=" Mobile";if(m=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1]){m=[parseFloat(m.replace(/\.(\d)$/,".0$1")),m];if("Safari"==F&&"+"==m[1].slice(-1))F="WebKit Nightly",S="alpha",y=m[1].slice(0,-1);else if(y==
m[1]||y==(m[2]=(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1]))y=null;m[1]=(/\bChrome\/([\d.]+)/i.exec(n)||0)[1];537.36==m[0]&&537.36==m[2]&&28<=parseFloat(m[1])&&"WebKit"==N&&(N=["Blink"]);V&&(ba||m[1])?(N&&(N[1]="like Chrome"),m=m[1]||(m=m[0],530>m?1:532>m?2:532.05>m?3:533>m?4:534.03>m?5:534.07>m?6:534.1>m?7:534.13>m?8:534.16>m?9:534.24>m?10:534.3>m?11:535.01>m?12:535.02>m?"13+":535.07>m?15:535.11>m?16:535.19>m?17:536.05>m?18:536.1>m?19:537.01>m?20:537.11>m?"21+":537.13>m?23:537.18>m?24:537.24>m?25:537.36>
m?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),m=(m=m[0],400>m?1:500>m?2:526>m?3:533>m?4:534>m?"4+":535>m?5:537>m?6:538>m?7:601>m?8:"8"));N&&(N[1]+=" "+(m+="number"==typeof m?".x":/[.+]/.test(m)?"":"+"));"Safari"==F&&(!y||45<parseInt(y))&&(y=m)}"Opera"==F&&(m=/\bzbov|zvav$/.exec(J))?(F+=" ",G.unshift("desktop mode"),"zvav"==m?(F+="Mini",y=null):F+="Mobile",J=J.replace(RegExp(" *"+m+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(N&&N[1])&&(G.unshift("desktop mode"),F="Chrome Mobile",y=null,/\bOS X\b/.test(J)?
(da="Apple",J="iOS 4.3+"):J=null);y&&0==y.indexOf(m=/[\d.]+$/.exec(J))&&-1<n.indexOf("/"+m+"-")&&(J=String(J.replace(m,"")).replace(/^ +| +$/g,""));N&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(J)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(F)&&N[1])&&(m=N[N.length-1])&&G.push(m);G.length&&(G=["("+G.join("; ")+")"]);da&&T&&0>T.indexOf(da)&&G.push("on "+da);T&&G.push((/^on /.test(G[G.length-
1])?"":"on ")+T);if(J){var ja=(m=/ ([\d.+]+)$/.exec(J))&&"/"==J.charAt(J.length-m[0].length-1);J={architecture:32,family:m&&!ja?J.replace(m[0],""):J,version:m?m[1]:null,toString:function(){var aa=this.version;return this.family+(aa&&!ja?" "+aa:"")+(64==this.architecture?" 64-bit":"")}}}(m=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(M))&&!/\bi686\b/i.test(M)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+m),"")),F&&(/\bWOW64\b/i.test(n)||V&&/\w(?:86|32)$/.test(D.cpuClass||D.platform)&&!/\bWin64; x64\b/i.test(n))&&
G.unshift("32-bit")):J&&/^OS X/.test(J.family)&&"Chrome"==F&&39<=parseFloat(y)&&(J.architecture=64);n||(n=null);E={};E.description=n;E.layout=N&&N[0];E.manufacturer=da;E.name=F;E.prerelease=S;E.product=T;E.ua=n;E.version=F&&y;E.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}};E.parse=k;E.toString=function(){return this.description||""};E.version&&G.unshift(y);E.name&&G.unshift(F);J&&F&&(J!=String(J).split(" ")[0]||J!=F.split(" ")[0]&&!T)&&G.push(T?"("+J+")":"on "+
J);G.length&&(E.description=G.join(" "));return E}var q={"function":!0,object:!0},p=q[typeof window]&&window||this,B=q[typeof exports]&&exports;q=q[typeof module]&&module&&!module.nodeType&&module;var t=B&&q&&"object"==typeof global&&global;!t||t.global!==t&&t.window!==t&&t.self!==t||(p=t);var u=Math.pow(2,53)-1,x=/\bOpera/;t=Object.prototype;var A=t.hasOwnProperty,v=t.toString,r=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(p.platform=r,define(function(){return r})):B&&
q?e(r,function(n,I){B[I]=n}):p.platform=r}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],h=0;h<a.length;h++){var b=document.createElement("meta");b.name=a[h].name;b.content=a[h].content;var e=window.document.head.querySelector('meta[name="'+b.name+'"]');e&&e.parentNode.removeChild(e);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}function isIOSLessThen13(){var a=platform.os,h=a.family.toLowerCase();a=parseFloat(a.version);return"ios"===h&&13>a?!0:!1}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}
function getSize(a){var h=a.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+a])a=e["client"+a];else if(window["inner"+a]!=e["client"+a]){var c=b.createElement("body");c.id="vpw-test-b";c.style.cssText="overflow:scroll";var l=b.createElement("div");l.id="vpw-test-d";l.style.cssText="position:absolute;top:-1000px";l.innerHTML="<style>@media("+h+":"+e["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+h+":7px!important}}</style>";c.appendChild(l);e.insertBefore(c,b.head);
a=7==l["offset"+a]?e["client"+a]:window["inner"+a];e.removeChild(c)}else a=window["inner"+a];return a}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var h=getSize("Width");s_bFocus&&_checkOrientation(h,a);var b=Math.min(a/CANVAS_HEIGHT,h/CANVAS_WIDTH),e=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var c=a-b;b+=c;e+=CANVAS_WIDTH/CANVAS_HEIGHT*c}else e<h&&(c=h-e,e+=c,b+=CANVAS_HEIGHT/CANVAS_WIDTH*c);c=a/2-b/2;var l=h/2-e/2,f=CANVAS_WIDTH/e;if(l*f<-EDGEBOARD_X||
c*f<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),h/(CANVAS_WIDTH-2*EDGEBOARD_X)),e=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),c=(a-b)/2,l=(h-e)/2,f=CANVAS_WIDTH/e;s_iOffsetX=-1*l*f;s_iOffsetY=-1*c*f;0<=c&&(s_iOffsetY=0);0<=l&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oTeamChoose&&s_oTeamChoose.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oCongratulations&&
s_oCongratulations.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone&&s_oStage?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*e,s_oStage.canvas.height=2*b,canvas.style.width=e+"px",canvas.style.height=b+"px",s_oStage.scaleX=s_oStage.scaleY=2*Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT)):s_bMobile||isChrome()?($("#canvas").css("width",e+"px"),$("#canvas").css("height",b+"px")):s_oStage&&(s_oStage.canvas.width=e,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),
s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>c||(c=(a-b)/2);$("#canvas").css("top",c+"px");$("#canvas").css("left",l+"px");fullscreenHandler()}}function createBitmap(a,h,b){var e=new createjs.Bitmap(a),c=new createjs.Shape;h&&b?c.graphics.beginFill("#fff").drawRect(-h/2,-b/2,h,b):c.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);e.hitArea=c;return e}
function createSprite(a,h,b,e,c,l){a=null!==h?new createjs.Sprite(a,h):new createjs.Sprite(a);h=new createjs.Shape;h.graphics.beginFill("#000000").drawRect(-b,-e,c,l);a.hitArea=h;return a}
function _checkOrientation(a,h){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>h?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function randomFloatBetween(a,h,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(h-a),h).toFixed(b))}function shuffle(a){for(var h=a.length,b,e;0!==h;)e=Math.floor(Math.random()*h),--h,b=a[h],a[h]=a[e],a[e]=b;return a}function formatTime(a){a/=1E3;var h=Math.floor(a/60);a=parseFloat(a-60*h).toFixed(1);var b="";b=10>h?b+("0"+h+":"):b+(h+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}
function checkRectCollision(a,h){var b=getBounds(a,.9);var e=getBounds(h,.98);return calculateIntersection(b,e)}function calculateIntersection(a,h){var b,e,c,l;var f=a.x+(b=a.width/2);var g=a.y+(e=a.height/2);var k=h.x+(c=h.width/2);var q=h.y+(l=h.height/2);f=Math.abs(f-k)-(b+c);g=Math.abs(g-q)-(e+l);return 0>f&&0>g?(f=Math.min(Math.min(a.width,h.width),-f),g=Math.min(Math.min(a.height,h.height),-g),{x:Math.max(a.x,h.x),y:Math.max(a.y,h.y),width:f,height:g,rect1:a,rect2:h}):null}
function getBounds(a,h){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=a.children,c=e.length,l;for(l=0;l<c;l++){var f=getBounds(e[l],1);f.x<b.x&&(b.x=f.x);f.y<b.y&&(b.y=f.y);f.x+f.width>b.x2&&(b.x2=f.x+f.width);f.y+f.height>b.y2&&(b.y2=f.y+f.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){c=
a.sourceRect||a.image;l=c.width*h;var g=c.height*h}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){c=a.spriteSheet.getFrame(a.currentFrame);l=c.rect.width;g=c.rect.height;e=c.regX;var k=c.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;e=e||0;l=l||0;k=k||0;g=g||0;b.regX=e;b.regY=k;c=a.localToGlobal(0-e,0-k);f=a.localToGlobal(l-e,g-k);l=a.localToGlobal(l-e,0-k);e=a.localToGlobal(0-e,g-k);b.x=
Math.min(Math.min(Math.min(c.x,f.x),l.x),e.x);b.y=Math.min(Math.min(Math.min(c.y,f.y),l.y),e.y);b.width=Math.max(Math.max(Math.max(c.x,f.x),l.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(c.y,f.y),l.y),e.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var h=document.createEvent("MouseEvents");h.initEvent("click",!0,!0);a.dispatchEvent(h)}}};
(function(){function a(b){var e={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in e?document.body.className=e[b.type]:(document.body.className=this[h]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var h="hidden";h in document?document.addEventListener("visibilitychange",a):(h="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(h="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(h="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function playSound(a,h,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(h),s_aSounds[a].loop(b),s_aSounds[a]):null}
function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,h){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(h)}function setMute(a,h){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(h)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var h=window.location.search.substring(1).split("&"),b=0;b<h.length;b++){var e=h[b].split("=");if(e[0]==a)return e[1]}}function distance(a,h){var b=a.x-h.x,e=a.y-h.y;return Math.sqrt(b*b+e*e)}function distanceWithoutSQRT(a,h){var b=a.x-h.x,e=a.y-h.y;return b*b+e*e}function randomRange(a,h){return Math.floor(Math.random()*(h-a))+a}function centerBetweenPointsV2(a,h){var b=new CVector2;b.set(.5*(a.getX()+h.getX()),.5*(a.getY()+h.getY()));return b}
function collideEdgeWithCircle(a,h,b,e){a=closestPointOnLine(a.getPointA(),a.getPointB(),h);h=distanceV2(h,a);return b<h?!1:!0}function closestPointOnLine(a,h,b){var e=new CVector2;e.setV(b);e.subtract(a);b=new CVector2;b.setV(h);b.subtract(a);b.normalize();e=dotProductV2(b,e);if(0>=e)return a;if(e>=distanceV2(a,h))return h;b.scalarProduct(e);b.addV(a);return b}function dotProductV2(a,h){return a.getX()*h.getX()+a.getY()*h.getY()}
function distanceV2(a,h){return Math.sqrt((h.getX()-a.getX())*(h.getX()-a.getX())+(h.getY()-a.getY())*(h.getY()-a.getY()))}function reflectVectorV2(a,h){var b=dotProductV2(a,h);a.set(a.getX()-2*b*h.getX(),a.getY()-2*b*h.getY());return a}function angleBetweenVectors(a,h){var b=Math.acos(dotProductV2(a,h)/(a.length()*h.length()));return 1==isNaN(b)?0:b}function distanceV2WithoutSQRT(a,h){return(h.getX()-a.getX())*(h.getX()-a.getX())+(h.getY()-a.getY())*(h.getY()-a.getY())}
function classifySphere(a,h,b,e){a=h.getX()*a.getX()+h.getY()*a.getY()+planeDistance(h,b);return Math.abs(a)<e?0<=a?"INTERSECT FRONT":"INTERSECT BEHIND":a>=e?"FRONT":"BEHIND"}function planeDistance(a,h){return-(a.getX()*h.getX()+a.getY()*h.getY())}
function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oTeamChoose&&s_oTeamChoose.resetFullscreenBut())}if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut();null!==s_oTeamChoose&&s_oTeamChoose.resetFullscreenBut()});
function linearFunction(a,h,b,e,c){return(a-h)*(c-e)/(b-h)+e}
function CSpriteLibrary(){var a,h,b,e,c,l;this.init=function(f,g,k){b=h=0;e=f;c=g;l=k;a={}};this.addSprite=function(f,g){a.hasOwnProperty(f)||(a[f]={szPath:g,oSprite:new Image},h++)};this.getSprite=function(f){return a.hasOwnProperty(f)?a[f].oSprite:null};this._onSpritesLoaded=function(){c.call(l)};this._onSpriteLoaded=function(){e.call(l);++b==h&&this._onSpritesLoaded()};this.loadSprites=function(){for(var f in a)a[f].oSprite.oSpriteLibrary=this,a[f].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[f].oSprite.src=a[f].szPath};this.getNumSprites=function(){return h}}
var CANVAS_WIDTH=1360,CANVAS_HEIGHT=640,CANVAS_WIDTH_HALF=.5*CANVAS_WIDTH,CANVAS_HEIGHT_HALF=.5*CANVAS_HEIGHT,EDGEBOARD_X=275,EDGEBOARD_Y=50,DISABLE_SOUND_MOBILE=!1,FONT_GAME="Montserrat",TEXT_COLOR="#fcff00",FPS_TIME=1E3/30,FPS_TIME_SECONDS=1/30,TOT_TEAM=32,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,LEFT_SCROLL_WORLD=0,RIGHT_SCROLL_WORLD=1,TEAM_ALGERIA=0,TEAM_ARGENTINA=1,TEAM_AUSTRALIA=2,TEAM_BRASIL=
3,TEAM_CAMEROON=4,TEAM_CHILE=5,TEAM_CROATIA=6,TEAM_DENMARK=7,TEAM_ENGLAND=8,TEAM_FRANCE=9,TEAM_GERMANY=10,TEAM_GHANA=11,TEAM_GREECE=12,TEAM_HOUNDURAS=13,TEAM_ITALY=14,TEAM_IVORY_COAST=15,TEAM_JAPAN=16,TEAM_MEXICO=17,TEAM_NETHERLANDS=18,TEAM_NEWZELAND=19,TEAM_NIGERIA=20,TEAM_PARAGUAY=21,TEAM_PORTUGAL=22,TEAM_RUSSIA=23,TEAM_SERBIA=24,TEAM_SLOVENIA=25,TEAM_SOUTH_AFRICA=26,TEAM_SOUTH_KOREA=27,TEAM_SPAIN=28,TEAM_SWITZERLAND=29,TEAM_URUGUAY=30,TEAM_USA=31,TOT_MATCH=7,KEEPERS=[32,33,34],PLAYERS_USER=0,PLAYERS_OPPONENT=
1,BALL=2,LOGIC_COLLISION=3,TWEEN_END_MACTH_Y=.5*CANVAS_HEIGHT,OFFSET_LIMIT_LEFT_SCROLL=-125,OFFSET_LIMIT_RIGHT_SCROLL=125,SMOOTH_SCROLL_OFFSET=.1,PLAYERS_ON_FIELD=8,LEFT_SIDE=3,RIGHT_SIDE=4,LINE_COLOR="#0000ff",LINE_COLOR_GOALS="#ff00ff",LINE_COLOR_EDGE_GOALS="#ffff00",SHOW_EDGE_COLLISION=!1,SHOW_COLLISION=!1,LEVEL_DIAGRAM,DANGLE_DEGREE=7,MIN_DIST_COLLISION_DETECT=1E3,HALF_PI=Math.PI/2,K_IMPACT_BALL=.95,TIME_TRY_TO_SHOT_BALL_OPPONENT=.7,START_POS_FLAG={x:337,y:208},FLAG_ADDED_POS={x:61,y:69},FLAG_LIMIT_POS_X=
750,OFFSET_ANGLE_ARROW=180,Y_POS_ARROW_SELECTED=10,OBJECT,Y_POS_ARROW_SELECTED_OFFSET=-100,FORCE_MULTIPLIER=.01,PLAYERS_FRICTION=.96,HIT_PLAYER_MIN_FORCE=.07,HIT_PLAYER_MAX_FORCE=30,PLAYER_REGY_OFFSET=-11,MIN_PLAYER_FORCE_VEL=.02,STEP_POS_X_TURN_BALL=33,FIRST_POS_X_TURN_BALL=80,BALL_ROTATION_MULTIPLIER=1,PLAYERS_RADIUS=20,PLAYERS_RADIUS_HALF=10,PLAYERS_KEEPER_RADIUS=14,PLAYERS_KEEPER_RADIUS_HALF=7,BALL_FRICTION=.97,SUPPORTERS_POS={x:0,y:120},START_TIME_FLAG_TIME=200,BALL_POSITION={x:.5*CANVAS_WIDTH,
y:.5*CANVAS_HEIGHT},USER_PLAYERS=[{x:514,y:319,goal_keeper:!1},{x:628,y:234,goal_keeper:!1},{x:628,y:431,goal_keeper:!1},{x:400,y:201,goal_keeper:!1},{x:378,y:489,goal_keeper:!1},{x:215,y:295,goal_keeper:!1},{x:190,y:378,goal_keeper:!1},{x:150,y:335,goal_keeper:!0}],OPPONENT_PLAYERS=[{x:835,y:319,goal_keeper:!1},{x:729,y:234,goal_keeper:!1},{x:729,y:431,goal_keeper:!1},{x:943,y:201,goal_keeper:!1},{x:966,y:489,goal_keeper:!1},{x:1145,y:295,goal_keeper:!1},{x:1170,y:378,goal_keeper:!1},{x:1208,y:335,
goal_keeper:!0}],POS_GOAL_OPPONENT_FRONT={x:1246,y:191},POS_GOAL_PLAYER_FRONT={x:115,y:191},POS_GOAL_OPPONENT_BOTTOM={x:1254,y:191},POS_GOAL_PLAYER_BOTTOM={x:107,y:191},FIELD_DIAGRAM_BALL=[[{x:171,y:173},{x:1189,y:173}],[{x:1189,y:173},{x:1220,y:284}],[{x:1220,y:284},{x:1285,y:283}],[{x:1285,y:283},{x:1320,y:386}],[{x:1320,y:386},{x:1251,y:387}],[{x:1251,y:387},{x:1293,y:526}],[{x:1293,y:526},{x:63,y:526}],[{x:63,y:526},{x:107,y:388}],[{x:107,y:388},{x:41,y:386}],[{x:41,y:386},{x:71,y:283}],[{x:71,
y:283},{x:138,y:284}],[{x:138,y:284},{x:171,y:173}]],FIELD_DIAGRAM_PLAYERS=[[{x:171,y:173},{x:1189,y:173}],[{x:1189,y:173},{x:1293,y:526}],[{x:1293,y:526},{x:63,y:526}],[{x:63,y:526},{x:171,y:173}]],EDGE_FOR_KEEPERS=[[{x:193,y:284},{x:165,y:387}],[{x:165,y:387},{x:39,y:383}],[{x:39,y:383},{x:72,y:280}],[{x:72,y:280},{x:193,y:284}],[{x:1165,y:284},{x:1284,y:281}],[{x:1284,y:281},{x:1318,y:387}],[{x:1318,y:387},{x:1194,y:387}],[{x:1194,y:387},{x:1165,y:284}]],GOAL_USER=[{x:137,y:284},{x:105,y:387}],
GOAL_OPPONENT=[{x:1221,y:284},{x:1252,y:387}],OTHER_COLLISION=[{x:107,y:387,radius:5},{x:138,y:284,radius:5},{x:1220,y:284,radius:5},{x:1251,y:387,radius:5}],TIME_RESET_BALL,REGULAR_MATCH_TIME,EXTENDED_MATCH_TIME,OPPONENT_SPEEDS,CHARACTER_SPEED,OPPONENT_DISTANCE_PROTECTION,OPPONENT_DISTANCE_PROTECTION_WHEN_SHOT,OPPONENT_DISTANCE_PROTECTION_AGG,OPPONENT_DISTANCE_PROTECTION_WHEN_SHOT_AGG,REACT_OPP_FOR_HEEL_SHOOT,BALL_VELOCITY_X_REACTION,BALL_VELOCITY_X_REACTION_ATTACK,BALL_AND_CHARACTER_DISTANCE_PROTECTION,
TIME_REACTION_FROM_SAVE_TO_GO,TIME_OPP_BECOME_AGGRESSIVE,TIME_AFTER_REACTION,TIME_INTERVAL_SHOOT,TIME_IN_PROTECT_STATE,SCORE_PLAYER_GOAL,SCORE_OPPONENT_GOAL,SCORE_WIN,SCORE_TIE,NUM_LEVEL_FOR_ADS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SOUNDTRACK_VOLUME_IN_GAME=.3;
function CPreloader(){var a,h,b,e,c,l,f,g,k;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();k=new createjs.Container;s_oStage.addChild(k)};this.unload=function(){k.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(q);q=s_oSpriteLibrary.getSprite("200x200");f=createBitmap(q);f.regX=.5*q.width;f.regY=.5*q.height;f.x=CANVAS_WIDTH/2;f.y=CANVAS_HEIGHT/2-80;k.addChild(f);g=new createjs.Shape;g.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(f.x-100,f.y-100,200,200,10);k.addChild(g);f.mask=g;q=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(q);e.x=CANVAS_WIDTH/2-q.width/
2;e.y=CANVAS_HEIGHT/2+70;k.addChild(e);a=q.width;h=q.height;c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,1,h);k.addChild(c);e.mask=c;b=new createjs.Text("","30px "+FONT_GAME,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+120;b.textBaseline="alphabetic";b.textAlign="center";k.addChild(b);l=new createjs.Shape;l.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(l);createjs.Tween.get(l).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(l);
k.removeChild(l)})};this.refreshLoader=function(q){b.text=q+"%";100===q&&(s_oMain._allResourcesLoaded(),b.visible=!1,e.visible=!1);c.graphics.clear();q=Math.floor(q*a/100);c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,q,h)};this._init()}
function CMain(a){var h,b=0,e=0,c=STATE_LOADING,l,f;this.initContainer=function(){var k=document.getElementById("canvas");s_oStage=new createjs.Stage(k);createjs.Touch.enable(s_oStage,!0);s_oStage.preventSelection=!1;s_bMobile=isMobile();!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(q){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=30;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;seekAndDestroy()?l=new CPreloader:window.location.href="https://www.codethislab.com/contact-us.html";h=!0};this.soundLoaded=function(){b++;l.refreshLoader(Math.floor(b/e*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"crowd",loop:!1,volume:1,ingamename:"crowd"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",
filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"goal",loop:!1,volume:1,ingamename:"goal"});s_aSoundsInfo.push({path:"./sounds/",filename:"kick",loop:!1,volume:1,ingamename:"kick"});s_aSoundsInfo.push({path:"./sounds/",filename:"kick_off",loop:!1,volume:1,ingamename:"kick_off"});s_aSoundsInfo.push({path:"./sounds/",filename:"player_collision",loop:!1,volume:1,ingamename:"player_collision"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",
loop:!0,volume:1,ingamename:"soundtrack"});e+=s_aSoundsInfo.length;s_aSounds=[];for(var k=0;k<s_aSoundsInfo.length;k++)this.tryToLoadSound(s_aSoundsInfo[k],!1)};this.tryToLoadSound=function(k,q){setTimeout(function(){s_aSounds[k.ingamename]=new Howl({src:[k.path+k.filename+".mp3"],autoplay:!1,preload:!0,loop:k.loop,volume:k.volume,onload:s_oMain.soundLoaded,onloaderror:function(p,B){for(var t=0;t<s_aSoundsInfo.length;t++)if(p===s_aSounds[s_aSoundsInfo[t].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[t],
!0);break}},onplayerror:function(p){for(var B=0;B<s_aSoundsInfo.length;B++)if(p===s_aSounds[s_aSoundsInfo[B].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[B].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[B].ingamename].play();"soundtrack"===s_aSoundsInfo[B].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},q?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play",
"./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png");s_oSpriteLibrary.addSprite("but_pause","./sprites/but_pause.png");s_oSpriteLibrary.addSprite("but_scroll","./sprites/but_scroll.png");s_oSpriteLibrary.addSprite("but_continue","./sprites/but_continue.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_not","./sprites/but_not.png");s_oSpriteLibrary.addSprite("but_continue_small",
"./sprites/but_continue_small.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("ball",
"./sprites/ball.png");s_oSpriteLibrary.addSprite("arrow","./sprites/arrow.png");s_oSpriteLibrary.addSprite("arrow_frame","./sprites/arrow_frame.png");s_oSpriteLibrary.addSprite("goal_top","./sprites/goal_top.png");s_oSpriteLibrary.addSprite("goal_bottom","./sprites/goal_bottom.png");s_oSpriteLibrary.addSprite("gui_box","./sprites/gui_box.png");s_oSpriteLibrary.addSprite("goal_text","./sprites/goal_text.png");s_oSpriteLibrary.addSprite("team_selection","./sprites/team_selection.png");s_oSpriteLibrary.addSprite("logo_ctl",
"./sprites/logo_ctl.png");s_oSpriteLibrary.addSprite("player_selected","./sprites/player_selected.png");s_oSpriteLibrary.addSprite("player_shadow","./sprites/player_shadow.png");s_oSpriteLibrary.addSprite("flags","./sprites/flags.png");s_oSpriteLibrary.addSprite("flags_small","./sprites/flags_small.png");s_oSpriteLibrary.addSprite("players","./sprites/players.png");s_oSpriteLibrary.addSprite("turn_ball","./sprites/turn_ball.png");s_oSpriteLibrary.addSprite("player_selected","./sprites/player_selected.png");
s_oSpriteLibrary.addSprite("help_mouse","./sprites/help_mouse.png");s_oSpriteLibrary.addSprite("help_touch","./sprites/help_touch.png");s_oSpriteLibrary.addSprite("arrow_fill","./sprites/arrow_fill.png");s_oSpriteLibrary.addSprite("trophy","./sprites/trophy.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");for(var k=0;k<TOT_TEAM;k++)s_oSpriteLibrary.addSprite("turn_"+k,"./sprites/turn_"+k+".png");e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=
function(){b++;l.refreshLoader(Math.floor(b/e*100))};this._onAllImagesLoaded=function(){};this._allResourcesLoaded=function(){l.unload();s_oSoundTrack=playSound("soundtrack",1,!0);s_oMain.gotoMenu()};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();h=!0};this.gotoMenu=function(){new CMenu;c=STATE_MENU};this.gotoTeamChoose=function(){new CTeamChoose;c=STATE_MENU};this.gotoGame=function(k){f=new CGame(g,k);c=STATE_GAME};this.gotoHelp=function(){new CHelp;
c=STATE_HELP};this.gotoCongratulations=function(k,q){new CCongratulations(k,q);c=STATE_MENU};this.stopUpdate=function(){h=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();h=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(k){if(!1!==h){var q=
(new Date).getTime();s_iTimeElaps=q-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=q;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);c===STATE_GAME&&f.update();s_oStage.update(k)}};s_oMain=this;var g=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;s_bAudioActive=a.audio_enable_on_startup;this.initContainer()}
var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oPhysicsController,s_oAdsLevel=1,s_oDrawLayer,s_oStage,s_oScrollStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_bFullscreen=!1,s_aSounds,s_aSoundsInfo;
function CToggle(a,h,b,e,c){var l,f,g,k,q,p;this._init=function(t,u,x,A){f=[];g=[];var v=new createjs.SpriteSheet({images:[x],frames:{width:x.width/2,height:x.height,regX:x.width/2/2,regY:x.height/2},animations:{state_true:[0],state_false:[1]}});l=A;p=createSprite(v,"state_"+l,x.width/2/2,x.height/2,x.width/2,x.height);p.x=t;p.y=u;p.stop();s_bMobile||(p.cursor="pointer");B.addChild(p);this._initListener()};this.unload=function(){p.off("mousedown",k);p.off("pressup",q);B.removeChild(p)};this._initListener=
function(){k=p.on("mousedown",this.buttonDown);q=p.on("pressup",this.buttonRelease)};this.addEventListener=function(t,u,x){f[t]=u;g[t]=x};this.setCursorType=function(t){p.cursor=t};this.setActive=function(t){l=t;p.gotoAndStop("state_"+l)};this.buttonRelease=function(){p.scaleX=1;p.scaleY=1;playSound("click",1,!1);l=!l;p.gotoAndStop("state_"+l);f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(g[ON_MOUSE_UP],l)};this.buttonDown=function(){p.scaleX=.9;p.scaleY=.9;f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN])};
this.setPosition=function(t,u){p.x=t;p.y=u};var B=c;this._init(a,h,b,e)}
function CGfxButton(a,h,b,e){var c,l,f,g,k,q,p=!1,B,t;this._init=function(x,A,v){c=[];l=[];g=[];f=createBitmap(v);f.x=x;f.y=A;q=k=1;f.regX=v.width/2;f.regY=v.height/2;s_bMobile||(f.cursor="pointer");u.addChild(f);this._initListener()};this.unload=function(){createjs.Tween.removeTweens(f);f.off("mousedown",B);f.off("pressup",t);u.removeChild(f)};this.setVisible=function(x){f.visible=x};this.setCursorType=function(x){f.cursor=x};this._initListener=function(){B=f.on("mousedown",this.buttonDown);t=f.on("pressup",
this.buttonRelease)};this.addEventListener=function(x,A,v){c[x]=A;l[x]=v};this.addEventListenerWithParams=function(x,A,v,r){c[x]=A;l[x]=v;g[x]=r};this.buttonRelease=function(){p||(f.scaleX=0<k?1:-1,f.scaleY=1,playSound("click",1,!1),c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(l[ON_MOUSE_UP],g[ON_MOUSE_UP]))};this.buttonDown=function(){p||(f.scaleX=0<k?.9:-.9,f.scaleY=.9,c[ON_MOUSE_DOWN]&&c[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN],g[ON_MOUSE_DOWN]))};this.rotation=function(x){f.rotation=x};this.getButton=function(){return f};
this.setPosition=function(x,A){f.x=x;f.y=A};this.setX=function(x){f.x=x};this.setY=function(x){f.y=x};this.getButtonImage=function(){return f};this.block=function(x){p=x;f.scaleX=k;f.scaleY=q};this.setScaleX=function(x){k=f.scaleX=x};this.getX=function(){return f.x};this.getY=function(){return f.y};this.pulseAnimation=function(){createjs.Tween.get(f,{loop:-1}).to({scaleX:.9*k,scaleY:.9*q},850,createjs.Ease.quadOut).to({scaleX:k,scaleY:q},650,createjs.Ease.quadIn)};this.removeAllTweens=function(){createjs.Tween.removeTweens(f)};
var u=e;this._init(a,h,b);return this}
function CMenu(){var a,h,b,e,c,l,f,g,k,q,p,B,t,u,x=null,A=null;this._init=function(){k=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(k);var v=s_oSpriteLibrary.getSprite("but_play");c=CANVAS_WIDTH/2;l=CANVAS_HEIGHT-90;q=new CGfxButton(c,l,v,s_oStage);q.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);q.pulseAnimation();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)v=s_oSpriteLibrary.getSprite("audio_icon"),f=CANVAS_WIDTH-v.height/2-20,g=v.height/2+20,t=new CToggle(f,
g,v,s_bAudioActive,s_oStage),t.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);var r=s_oSpriteLibrary.getSprite("but_info");b=v.height/2+20;e=v.height/2+20;p=new CGfxButton(b,e,r,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);v=window.document;r=v.documentElement;x=r.requestFullscreen||r.mozRequestFullScreen||r.webkitRequestFullScreen||r.msRequestFullscreen;A=v.exitFullscreen||v.mozCancelFullScreen||v.webkitExitFullscreen||v.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(x=
!1);x&&screenfull.isEnabled&&(v=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+v.width/2+10,h=e,u=new CToggle(a,h,v,s_bFullscreen,s_oStage),u.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));B=new createjs.Shape;B.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(B);createjs.Tween.get(B).to({alpha:0},1E3).call(function(){B.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(v,r){q.setPosition(c,l-r);p.setPosition(b+
v,e+r);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||t.setPosition(f-v,r+g);x&&screenfull.isEnabled&&u.setPosition(a+s_iOffsetX,h+s_iOffsetY)};this.unload=function(){q.unload();q=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)t.unload(),t=null;x&&screenfull.isEnabled&&u.unload();s_oStage.removeAllChildren();s_oMenu=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButInfoRelease=function(){new CCreditsPanel};this._onButPlayRelease=function(){this.unload();
s_oMain.gotoTeamChoose()};this.resetFullscreenBut=function(){x&&screenfull.isEnabled&&u.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?A.call(window.document):x.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a,h){var b=!0,e=!1,c=!1,l=!1,f=!1,g=!1,k=!1,q=!1,p=!1,B=!1,t=!1,u=!1,x=!1,A,v,r,n,I,z,E,G,D,y,ba,L,Z,ca,X,Y,fa,H,Q,O,m,M,S,V,N,F,T,da,J,ja,aa,W,U;this._init=function(){$(s_oMain).trigger("start_session");s_oScrollStage=new createjs.Container;s_oStage.addChild(s_oScrollStage);n=h;b=!1;r=v=A=0;G=-1;aa=0;D=NUM_OF_SHOT;W=LAUNCH_PENALITY_SECOND;ba=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oScrollStage.addChild(ba);T=[];da=[];V=[];N=[];F=[];O=this.createFieldEdges(FIELD_DIAGRAM_PLAYERS);
m=this.createFieldEdges(FIELD_DIAGRAM_BALL);this._createEdgeGoals();playSound("crowd",1,!0);M=this._createEdgeGoalKeeper(EDGE_FOR_KEEPERS);S=new CEdge(EDGE_FOR_KEEPERS[4][0].x,EDGE_FOR_KEEPERS[4][0].y,EDGE_FOR_KEEPERS[7][0].x,EDGE_FOR_KEEPERS[7][0].y);X=new CArrow(0,0,s_oScrollStage);X.setVisible(!1);ca=new CGoal(s_oScrollStage);J=this._createRandomOpponentTeamOrder();var d=this._createPlayers(),w=s_oSpriteLibrary.getSprite("ball");this._createBall(w,BALL_POSITION.x,BALL_POSITION.y,d,s_oScrollStage);
F.push(L);this._createOtherCollision(F,d);fa={x:s_oStage.mouseX/s_iScaleFactor-s_oScrollStage.x,y:s_oStage.mouseY};ca.createGoalFront();I=z=0;d=s_oSpriteLibrary.getSprite("player_selected");Y=new CArrowPlayerSelected(0,0,d,s_oScrollStage);Y.setVisible(!1);y=new CInterface(h,J[r]);y.refreshResult(I,z);ja=REGULAR_MATCH_TIME;y.refreshTime(TEXT_TIME+": "+Math.ceil(ja))};this._createPlayers=function(){for(var d=s_oSpriteLibrary.getSprite("players"),w=0,C=0;C<PLAYERS_ON_FIELD;C++){var K=n,R=J[r];if(USER_PLAYERS[C].goal_keeper){var P=
Math.floor(Math.random()*KEEPERS.length);K=KEEPERS[P]}if(OPPONENT_PLAYERS[C].goal_keeper){for(P=Math.floor(Math.random()*KEEPERS.length);P===K;)P=Math.floor(Math.random()*KEEPERS.length);R=KEEPERS[P]}V.push(da[C]=this.createPlayer(d,USER_PLAYERS[C].x,USER_PLAYERS[C].y,w,-1,!0,USER_PLAYERS[C].goal_keeper,K,PLAYERS_USER,s_oScrollStage));w++;V.push(N[C]=this.createPlayer(d,OPPONENT_PLAYERS[C].x,OPPONENT_PLAYERS[C].y,w,1,!1,OPPONENT_PLAYERS[C].goal_keeper,R,PLAYERS_OPPONENT,s_oScrollStage));w++;F.push(da[C]);
F.push(N[C])}return w};this._createOtherCollision=function(d,w){for(var C=0;C<OTHER_COLLISION.length;C++)w++,d.push(new CInvisibleCollision(OTHER_COLLISION[C].x,OTHER_COLLISION[C].y,w,LOGIC_COLLISION,OTHER_COLLISION[C].radius,s_oScrollStage))};this._createEdgeGoalKeeper=function(d){for(var w=[],C=0;C<d.length;C++)w.push(new CEdge(d[C][0].x,d[C][0].y,d[C][1].x,d[C][1].y));return w};this._createEdgeGoals=function(){Q=new CEdge(GOAL_OPPONENT[0].x,GOAL_OPPONENT[0].y,GOAL_OPPONENT[1].x,GOAL_OPPONENT[1].y);
H=new CEdge(GOAL_USER[0].x,GOAL_USER[0].y,GOAL_USER[1].x,GOAL_USER[1].y);SHOW_EDGE_COLLISION&&(this.createGraphicsCollision(GOAL_OPPONENT,!1,LINE_COLOR_GOALS),this.createGraphicsCollision(GOAL_USER,!1,LINE_COLOR_GOALS))};this._createRandomOpponentTeamOrder=function(){for(var d=[],w=0,C=0;C<TOT_TEAM;C++)n!==C&&(d[w]=C,w++);return d=shuffle(d)};this.createFieldEdges=function(d){for(var w=[],C=0;C<d.length;C++)w.push(new CEdge(d[C][0].x,d[C][0].y,d[C][1].x,d[C][1].y));SHOW_EDGE_COLLISION&&this.createGraphicsCollision(d,
!0,LINE_COLOR);return w};this.createGraphicsCollision=function(d,w,C){var K=new createjs.Shape;K.graphics.beginStroke(C);K.graphics.setStrokeStyle(2);for(C=0;C<d.length;C++)w?K.graphics.lineTo(d[C][0].x,d[C][0].y):K.graphics.lineTo(d[C].x,d[C].y);K.graphics.closePath();s_oScrollStage.addChild(K)};this.unload=function(){b=!1;y.unload();for(var d=0;d<V.length;d++)V[d].unload(),V[d]=null;stopSound("crowd");s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();!1===s_bMobile&&(document.onkeydown=
null,document.onkeyup=null)};this.createPlayer=function(d,w,C,K,R,P,ha,ia,ea,ka){d=new CPlayer(w,C,d,K,P,ha,ea,ka);d.rotate(R);d.changeTeam(ia);return d};this.createOpponent=function(d,w,C,K){d=s_oSpriteLibrary.getSprite("team_"+d);Z=new COpponent(w,C,d,OPPONENT_SPEEDS[r],_oPhysicsObject,_oOpponentCollision,K);Z.setDistanceProtection(OPPONENT_DISTANCE_PROTECTION[r])};this._createOpponentCollision=function(){return _oPhysicsObject.addCollisionShape(OPPONENT_COLLISION)};this.onPlayerSelect=function(d){d.id===
G||q||(f=!0,G=d.id,Y.setPosition(d.pos.x,d.pos.y+Y_POS_ARROW_SELECTED_OFFSET),Y.setVisible(!0),Y.animation(),X.setPosition(d.pos.x,d.pos.y),X.setVisible(!0))};this.arrowDraw=function(){if(f){var d=fa.x-X.getX(),w=fa.y-X.getY();d=Math.atan2(w,d);d=180/Math.PI*d+OFFSET_ANGLE_ARROW;X.setAngle(d);d=Math.ceil(distance({x:X.getX(),y:X.getY()},fa));100<d&&(d=100);this.setForce(-d);X.mask(d);X.circle(d)}};this.setForce=function(d){U=d*FORCE_MULTIPLIER};this.onPressMove=function(){f&&!e&&(fa={x:s_oStage.mouseX/
s_iScaleFactor-s_oScrollStage.x,y:s_oStage.mouseY/s_iScaleFactor})};this.onPressUp=function(){if(f&&null!==V[G]&&!e){var d=new CVector2(V[G].getX()-fa.x,V[G].getY()-fa.y);d.scalarProduct(U);var w=d.length();w>HIT_PLAYER_MIN_FORCE?(w>HIT_PLAYER_MAX_FORCE&&(d.normalize(),d.scalarProduct(HIT_PLAYER_MAX_FORCE)),d.set(-d.getX(),-d.getY()),s_oGame.addForceToPlayer(V[G],d),s_oGame.upadtePhysics(!0),q=!0,D--,W=LAUNCH_PENALITY_SECOND,y.refreshTurnNumber(D,!1)):console.log("TIRO NULLO");f=!1;fa.x=0;aa=U=fa.y=
0;p=!0;Y.setVisible(!1);Y.removeTween();X.setVisible(!1)}};this.startSmootFollowBall=function(){var d=-L.getX()+CANVAS_WIDTH_HALF;d<=-iHalfOffsetX?s_oScrollStage.x=-iHalfOffsetX:d>=iHalfOffsetX?s_oScrollStage.x=iHalfOffsetX:createjs.Tween.get(s_oScrollStage).to({x:d},750,createjs.Ease.cubicOut).call(function(){p=!0})};this.addForceToPlayer=function(d,w){d.addForce(w)};this._createBall=function(d,w,C,K,R){L=new CBall(w,C,d,K,R)};this.getBallSpritePos=function(){return{x:_oBallSprite.getX(),y:_oBallSprite.getY()}};
this.getCharacterPos=function(){return{x:(void 0).getX(),y:(void 0).getY()}};this.getPlayerTeam=function(){return n};this.getOpponentTeam=function(){return J[r]};this.playKickSound=function(){e||playSound("kick",1,!1)};this.onExit=function(){this.unload();$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session");setVolume("soundtrack",1);s_oMain.gotoMenu()};this._onExitHelp=function(){y.onExitFromHelp()};this._onExitVsPanel=function(){y._onExitVsPanel();y.createStartMatchText();$(s_oMain).trigger("start_level",
r)};this.startMatch=function(){b=!0;e=!1;setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);playSound("kick_off",1,!1)};this.onContinue=function(d){r++;this.nextLevel();this.resetLevel();this.tweenScrollStage(-L.getX()+CANVAS_WIDTH_HALF);var w=s_oSpriteLibrary.getSprite("msg_box");y.createVsPanel(w,n,J[r],d,r,750)};this.nextLevel=function(){this.changeOpponenPlayersTeam();y.setTeams(n,J[r]);y.setTeamsFlagScoreBoard(J[r])};this.changeOpponenPlayersTeam=function(){for(var d=0;d<N.length-1;d++)N[d].changeTeam(J[r]);
for(d=Math.floor(Math.random()*KEEPERS.length);d===da[da.length-1].getTeam();)d=Math.floor(Math.random()*KEEPERS.length);N[N.length-1].changeTeam(KEEPERS[d])};this.restartLevel=function(){this.resetLevel();y.refreshScore(A);y.createStartMatchText();this.tweenScrollStage(-L.getX()+CANVAS_WIDTH_HALF);$(s_oMain).trigger("restart_level",r)};this.resetLevel=function(){this.resetResult();this.resetAllObjectPos();x=B=t=k=u=f=p=q=e=!1;G=-1;v=0;D=NUM_OF_SHOT;Y.setVisible(!1);Y.removeTween();X.setVisible(!1);
this.activeAllTurnBall()};this.tweenScrollStage=function(d){createjs.Tween.get(s_oScrollStage).to({x:d},800,createjs.Ease.cubicOut)};this.resetResult=function(){ja=REGULAR_MATCH_TIME;y.refreshTime(TEXT_TIME+": "+Math.ceil(ja));I=z=0;y.refreshResult(I,z)};this.matchTime=function(d){0<ja?(ja-=d,y.refreshTime(TEXT_TIME+": "+Math.ceil(ja))):this.finishTime()};this.finishTime=function(){e=!0;var d=!1;if(I===z&&!1===x)y.createExtendedTimeText(),x=!0;else{if(I>z){var w=!0;playSound("goal",1,!1);var C=this.calculateNewScore();
this.storesResult();A=C.new_score+=v;y.refreshScore(A);r===TOT_MATCH-1&&(d=!0)}else w=!1,C=A+v,playSound("game_over",1,!1);$(s_oMain).trigger("end_level",r);y.createEndMatchText(I,z,w,C,d)}};this.extendTime=function(){this.resetAllObjectPos();B=t=k=u=f=p=q=e=!1;G=-1;D=NUM_OF_SHOT;Y.setVisible(!1);Y.removeTween();X.setVisible(!1);this.activeAllTurnBall();this.tweenScrollStage(-L.getX()+CANVAS_WIDTH_HALF);ja=EXTENDED_MATCH_TIME;y.refreshTime(TEXT_TIME_EXT+": "+Math.ceil(ja));e=!1;playSound("kick_off",
1,!1)};this.storesResult=function(){T[r]={player_team:n,opponent_team:J[r],result:y.getScoreBoardResult()}};this.unpause=function(d){b=d};this._onEnd=function(){this.unload();$(s_oMain).trigger("end_session");setVolume("soundtrack",1);s_oMain.gotoCongratulations(T,A)};this.calculateNewScore=function(){var d={score:A,player_goal_score:0,opponent_goal_score:0,score_match:0,new_score:0};d.player_goal_score=I*SCORE_PLAYER_GOAL;d.opponent_goal_score=z*SCORE_OPPONENT_GOAL;d.score_match=x?SCORE_TIE:SCORE_WIN;
d.new_score=d.score+d.player_goal_score+d.opponent_goal_score+d.score_match;return d};this.dirScrollWorld=function(d){q||(l=d.press,E=d.dir,aa=d.velocity)};this.objectsPhysics=function(){for(var d,w=!0,C=0;C<F.length;C++)d=F[C],d.type()!==LOGIC_COLLISION&&(d.vCurForce().addV(d.vTmpForce()),d.vTmpForce().set(0,0),d.vPrevPos().setV(d.vPos()),d.setPosVector(),this.collideCircleWithEdges(d,O),d.vCurForce().scalarProduct(PLAYERS_FRICTION),d.vCurForce().length2()<MIN_PLAYER_FORCE_VEL?d.vCurForce().set(0,
0):w=!1,this.sortZIndex(C));w&&this.allObjectsStop()};this.sortZIndex=function(d){for(var w=0;w<F.length;w++)d!==w&&this.sortByY(F[d].getObject(),F[w].getObject())};this.sortByY=function(d,w){null!==d&&null!==w&&(d.y<w.y?s_oScrollStage.getChildIndex(d)>s_oScrollStage.getChildIndex(w)&&s_oScrollStage.swapChildren(d,w):d.y>w.y&&s_oScrollStage.getChildIndex(w)>s_oScrollStage.getChildIndex(d)&&s_oScrollStage.swapChildren(w,d))};this.allObjectsStop=function(){this.upadtePhysics(!1);q=!1;G=-1;t=p=B=!1;
e||this.checkTurn()};this.checkTurn=function(){u?0===D?(D=NUM_OF_SHOT,this.activeAllTurnBall(),u=!1,y.turnAnim(TEXT_PLAYER_TURN),y.refreshTurnTeam(n)):this.cpuTurn():0===D&&(D=NUM_OF_SHOT,this.activeAllTurnBall(),u=!0,0>=W?y.turnAnim(TEXT_LAUNCH_DELAY_PENALTY):y.turnAnim(TEXT_CPU_TURN),y.refreshTurnTeam(J[r]),this.cpuTurn())};this.activeAllTurnBall=function(){for(var d=0;d<NUM_OF_SHOT;d++)y.refreshTurnNumber(d,!0)};this.goal=function(d){e||(g=!0,d===LEFT_SIDE?(z++,u=!1,playSound("game_over",1,!1)):
(I++,u=!0,playSound("goal",1,!1)),y.refreshResult(I,z),y.createGoalText(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF),p=!1,D=NUM_OF_SHOT,this.activeAllTurnBall(),y.refreshTurnTeam(n),createjs.Tween.get(s_oScrollStage).to({x:0},1E3,createjs.Ease.cubicOut).call(function(){u?(y.turnAnim(TEXT_CPU_TURN),D=NUM_OF_SHOT,s_oGame.activeAllTurnBall(),y.refreshTurnTeam(J[r])):(y.turnAnim(TEXT_PLAYER_TURN),D=NUM_OF_SHOT,s_oGame.activeAllTurnBall(),y.refreshTurnTeam(n));s_oGame.resetAllObjectPos();g=!1}))};this.matchTime=
function(d){0<ja?(ja-=d,y.refreshTime(TEXT_TIME+": "+Math.ceil(ja))):this.finishTime()};this.resetAllObjectPos=function(){for(var d=0;d<F.length;d++)F[d].resetPos()};this.cpuTurn=function(){if(!e){var d=new CVector2,w=new CVector2,C=new CVector2,K=new CVector2;w.set(GOAL_USER[0].x,GOAL_USER[0].y);C.set(GOAL_USER[1].x,GOAL_USER[1].y);var R=closestPointOnLine(w,C,da[da.length-1].vPos()),P=distanceV2WithoutSQRT(R,w),ha=distanceV2WithoutSQRT(R,C);w=P>ha?centerBetweenPointsV2(w,R):centerBetweenPointsV2(C,
R);d.setV(w);d.subtract(L.vPos());d.normalize();w=PRECISION_CPU_RATE[r].min;w=Math.random()*(PRECISION_CPU_RATE[r].max-w)+w;K.setV(d);K.invert();K.scalarProduct(L.getRadius()*w+.5*PLAYERS_RADIUS_HALF);K.addV(L.vPos());d.invert();this.findPlayerCpU(L.getX(),d,K)}};this.findPlayerCpU=function(d,w,C){var K=[];d=!0;for(var R=0,P=HIT_PLAYER_MAX_FORCE;P>HIT_PLAYER_MIN_FORCE;)R+=P,P*=PLAYERS_FRICTION;R*=R;P=new CVector2;P.set(L.getX(),L.getY());var ha=classifySphere(P,S.getNormal(),S.m_pCenter(),L.getRadius());
if("FRONT"!==ha&&"INTERSECT FRONT"!==ha&&P.getY()>EDGE_FOR_KEEPERS[4][0].y&&P.getY()<EDGE_FOR_KEEPERS[7][0].y)this.prepareCpuForLaunch(N[N.length-1],!1,C,!0);else{for(P=0;P<N.length-1;P++){var ia=new CEdge,ea,ka=ha=!1,la=!1;ia.set(N[P].vPos().getX(),N[P].vPos().getY(),C.getX(),C.getY());for(ea=0;ea<F.length;ea++)if(F[ea].getID()!==N[P].getID()&&F[ea].type()!==BALL&&!0===(ka=collideEdgeWithCircle(ia,F[ea].vPos(),2*F[ea].getRadius(),null))){la=!0;break}ia=distanceV2WithoutSQRT(N[P].vPos(),C);R<ia&&
!1===la&&(la=!0);ea=new CVector2;ea.setV(N[P].vPos());ea.subtract(C);ea.normalize();ea=dotProductV2(w,ea);0>ea?ha=!0:d=!1;K.push({iAngle:ea,iDist2:ia,bLeft:ha,bObstacle:ka,bInsufficientPower:la,oPlayer:N[P],iScoreDist2:0,iScoreAngle:ea,iTotScore:0})}w=this.evaluatePlayers(K,d);this.prepareCpuForLaunch(w,d,C,!1)}};this.prepareCpuForLaunch=function(d,w,C,K){var R=new CVector2,P=CPU_POWER_PLAYER[r];D--;y.refreshTurnNumber(D,!1);d.isGoalKeeper()&&(P=.5*CPU_POWER_PLAYER[r]);w?(d.getY()>L.getY()?R.set(L.getX(),
L.getY()+2*L.getRadius()-5):R.set(L.getX(),L.getY()-2*L.getRadius()+5),R.subtract(d.vPos()),R.normalize(),P=.8*CPU_POWER_PLAYER[r]):(K?R.setV(L.vPos()):R.setV(C),R.subtract(d.vPos()),R.normalize());w=new CVector2;w.setV(R);w.scalarProduct(P*HIT_PLAYER_MAX_FORCE);d.addForce(w);k=q=p=!0};this.evaluatePlayers=function(d,w){d=this.sortArrayDecrescending("iDist2",d);var C=d[0].oPlayer;d[0].iScoreDist2=1;var K=d[0].iDist2;var R=d[d.length-1].iDist2;for(var P=1;P<d.length-1;P++)d[P].iScoreDist2=1-(d[P].iDist2-
K)/(R-K);d=this.sortArrayDecrescending("iAngle",d);R=d[d.length-1].iAngle;d[d.length-1].iScoreAngle=1;K=d[0].iAngle;d[0].iScoreAngle=0;for(P=1;P<d.length-1;P++)d[P].iScoreAngle=(d[P].iAngle-K)/(R-K);for(K=0;K<d.length;K++)d[K].iTotScore=d[K].iScoreDist2+d[K].iScoreAngle,!1===d[K].bObstacle&&(d[K].iTotScore+=1),!1===d[K].bInsufficientPower&&(d[K].iTotScore+=1);d=this.sortArrayDecrescending("iTotScore",d);return w?C:d[d.length-1].oPlayer};this.sortArrayDecrescending=function(d,w){for(var C=[],K=0;K<
w.length;K++)C[K]=w[K];for(K=0;K<C.length-1;K++)for(var R=K+1;R<C.length;R++)if(C[K][d]>C[R][d]){var P=C[K];C[K]=C[R];C[R]=P}return C};this.collideCircleWithEdges=function(d,w){var C,K=new CVector2;K.setV(d.vCurForce());K.normalize();var R=d.vCurForce().length(),P=Math.floor(R/2),ha=!1,ia=new CVector2;ia.setV(d.vPrevPos());K.normalize();K.scalarProduct(2);var ea;for(ea=0;ea<P+1;ea++){ea===P&&(K.normalize(),K.scalarProduct(R-2*P));ia.addV(K);if(d.isGoalKeeper())for(w=M,C=0;C<M.length;C++){if(ha=collideEdgeWithCircle(M[C],
ia,d.getRadius(),null),!0===ha){ia.subtract(K);break}}else{d.type()===BALL&&(w=m);for(C=0;C<w.length;C++)if(ha=collideEdgeWithCircle(w[C],ia,d.getRadius(),null),!0===ha){K.scalarProduct(1.3);ia.subtract(K);break}if(d.type()===BALL&&!g){if(d.getX()<CANVAS_WIDTH_HALF){c=collideEdgeWithCircle(H,ia,3,null);var ka=LEFT_SIDE}else c=collideEdgeWithCircle(Q,ia,3,null),ka=RIGHT_SIDE;if(c){this.goal(ka);return}}if(!0===ha)break}d.vPos().setV(ia);if(!0===this.collideObjectWithObjects(d))return}!0===ha?(C=reflectVectorV2(d.vCurForce(),
w[C].getNormal()),d.vPos().setV(ia),d.vCurForce().setV(C)):d.vPos().addV(d.vCurForce());d.vPos().setV(ia);this.collideObjectWithObjects(d)};this.upadtePhysics=function(d){k=d};this.collideObjectWithObjects=function(d){for(var w,C=MIN_DIST_COLLISION_DETECT,K,R=[],P=0;P<F.length;P++)d.getID()!==F[P].getID()&&(w=distanceV2WithoutSQRT(d.vPos(),F[P].vPos()),w<=d.getRadiusQuadro()+F[P].getRadiusQuadro()&&(R.push({oObject:F[P],iDist:w}),C>w&&(C=w,K=R.length-1)));if(0!==R.length){C=new CVector2;w=new CVector2;
P=new CVector2;P.setV(d.vCurForce());P.invert();P.normalize();w.setV(d.vPos());w.subtract(R[K].oObject.vPos());w.normalize();C.setV(w);C.scalarProduct(1.5*d.getRadius());C.addV(R[K].oObject.vPos());d.vPos().setV(C);C=angleBetweenVectors(P,w)/HALF_PI;P=new CVector2;P.setV(d.vCurForce());P.normalize();var ha=d.vCurForce().length();d.vCurForce().setV(reflectVectorV2(P,w));ha*=K_IMPACT_BALL;d.vCurForce().normalize();d.vCurForce().scalarProduct(.15*ha);this.checkPlayersCollisionSound(d,R[K].oObject);this.checkPlayersCollisionAnimationDangle(d,
R[K].oObject);this.checkPlayerBallCollision(d,R[K].oObject);this.checkThereIsAFoul(d,R[K].oObject);w.invert();w.normalize();w.scalarProduct(ha*(1-C)+.1*ha);R[K].oObject.type()!==LOGIC_COLLISION&&R[K].oObject.addForce(w);return!0}};this.checkPlayersCollisionSound=function(d,w){(d.type()===PLAYERS_OPPONENT&&w.type()===PLAYERS_USER||d.type()===PLAYERS_USER&&w.type()===PLAYERS_OPPONENT||d.type()===PLAYERS_USER&&w.type()===PLAYERS_USER||d.type()===PLAYERS_OPPONENT&&w.type()===PLAYERS_OPPONENT)&&playSound("player_collision",
1,!1)};this.checkThereIsAFoul=function(d,w){B||(d.type()===PLAYERS_OPPONENT&&w.type()===PLAYERS_USER||d.type()===PLAYERS_USER&&w.type()===PLAYERS_OPPONENT?this.foul():B=!0)};this.checkPlayersCollisionAnimationDangle=function(d,w){d.type()!==PLAYERS_OPPONENT&&d.type()!==PLAYERS_USER||d.animDangle();w.type()!==PLAYERS_OPPONENT&&w.type()!==PLAYERS_USER||w.animDangle()};this.checkPlayerBallCollision=function(d,w){d.type()===BALL&&w.type()===PLAYERS_USER||d.type()===PLAYERS_USER&&w.type()===BALL?(this.addScore(TOUCH_BALL_SCORE),
playSound("kick",1,!1)):(d.type()===BALL&&w.type()===PLAYERS_OPPONENT||d.type()===PLAYERS_OPPONENT&&w.type()===BALL)&&playSound("kick",1,!1)};this.foul=function(){if(!e&&!t){t=!0;playSound("kick_off",1,!1);u?(u=!1,y.turnAnim(TEXT_FOUL+" "+TEXT_PLAYER_TURN),y.refreshTurnTeam(n)):(-1<v+FOUL_SCORE?this.addScore(FOUL_SCORE):(v=0,this.addScore(0)),u=!0,y.turnAnim(TEXT_FOUL+" "+TEXT_CPU_TURN),y.refreshTurnTeam(J[r]));D=NUM_OF_SHOT;for(var d=0;d<NUM_OF_SHOT;d++)y.refreshTurnNumber(d,!0)}};this.addScore=
function(d){e||(v+=d,y.refreshScore(A+v))};this.followBall=function(){if(p){var d=-L.getX()+CANVAS_WIDTH_HALF;s_oScrollStage.x=d<=-s_iOffsetX?-s_iOffsetX:d>=s_iOffsetX?s_iOffsetX:s_oScrollStage.x+.25*(d-s_oScrollStage.x)}};this.scrollWorld=function(){if(s_oScrollStage.x<=-s_iOffsetX&&E===RIGHT_SCROLL_WORLD)s_oScrollStage.x=-s_iOffsetX;else if(s_oScrollStage.x>=s_iOffsetX&&E===LEFT_SCROLL_WORLD)s_oScrollStage.x=s_iOffsetX;else{if(!l)if(E===RIGHT_SCROLL_WORLD){if(0<=aa){aa=0;return}aa+=SMOOTH_SCROLL_OFFSET}else{if(0>=
aa){aa=0;return}aa-=SMOOTH_SCROLL_OFFSET}s_oScrollStage.x+=aa}};this.launchDelayPenality=function(d){e||(0<W?W-=d:(D=0,G=-1,X.setVisible(!1),f=!1,Y.setVisible(!1),Y.removeTween(),this.checkTurn(),W=LAUNCH_PENALITY_SECOND))};this.update=function(){b&&(q||u?this.followBall():(this.scrollWorld(),this.arrowDraw(),this.launchDelayPenality(FPS_TIME_SECONDS)),e||this.matchTime(FPS_TIME_SECONDS),k&&(this.objectsPhysics(),L.rolls(),this.sortGoalsFront()))};this.sortGoalsFront=function(){var d=ca.getGoalPlayerFront();
L.getY()>CANVAS_WIDTH_HALF&&(d=ca.getGoalEnemyFront());for(var w=0;w<F.length;w++)this.sortByY(d,F[w].getObject())};s_oGame=this;TIME_RESET_BALL=a.time_reset_ball;REGULAR_MATCH_TIME=a.regular_match_time;EXTENDED_MATCH_TIME=a.extend_match_time;LAUNCH_PENALITY_SECOND=a.launch_penality_second;SCORE_PLAYER_GOAL=a.add_score_player_goal;SCORE_OPPONENT_GOAL=a.remove_score_opponent_goal;SCORE_WIN=a.score_win;SCORE_TIE=a.score_tie;SCROLL_VELOCITY=a.scroll_velocity;TOUCH_BALL_SCORE=a.touch_ball_score;FOUL_SCORE=
a.foul_score;NUM_OF_SHOT=a.num_of_shot;PRECISION_CPU_RATE=a.precision_cpu_rate;CPU_POWER_PLAYER=a.cpu_power_players;NUM_LEVEL_FOR_ADS=a.num_levels_for_ads;this._init()}var s_oGame;
function CInterface(a,h){var b,e,c,l,f,g,k,q,p,B,t,u,x,A,v,r,n,I,z,E,G,D,y,ba,L,Z,ca,X,Y=null,fa=null;this._init=function(H,Q){this.setTeams(H,Q);var O=s_oSpriteLibrary.getSprite("gui_box"),m=.5*O.height;z=new CScoreBoard(O,.5*CANVAS_WIDTH,m,Z,ca);E=new CTimeBoard(O,20,m-4);G=new CTurnBoard(O,20,CANVAS_HEIGHT-2*m-20);D=new CLevelScoreBoard(O,CANVAS_WIDTH-O.width-20,CANVAS_HEIGHT-2*m-20);G.setTurn(H);this._createScrollButtons();O=s_oSpriteLibrary.getSprite("but_exit");c=CANVAS_WIDTH-O.height/2-20;
l=O.height/2+20;t=new CGfxButton(c,l,O,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onExit,this);O=s_oSpriteLibrary.getSprite("but_pause");b=c-O.height-20;e=l;u=new CGfxButton(b,e,O,s_oStage);u.addEventListener(ON_MOUSE_UP,this._onPause,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(O=s_oSpriteLibrary.getSprite("audio_icon"),k=b-O.height-20,q=l,A=new CToggle(k,q,O,s_bAudioActive,s_oStage),A.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),O=s_oSpriteLibrary.getSprite("but_fullscreen"),f=
k-O.width/2-10,g=q):(O=s_oSpriteLibrary.getSprite("but_fullscreen"),f=b-O.height-20,g=l);m=window.document;var M=m.documentElement;Y=M.requestFullscreen||M.mozRequestFullScreen||M.webkitRequestFullScreen||M.msRequestFullscreen;fa=m.exitFullscreen||m.mozCancelFullScreen||m.webkitExitFullscreen||m.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(Y=!1);Y&&screenfull.isEnabled&&(X=new CToggle(f,g,O,s_bFullscreen,s_oStage),X.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));x=new CHelpPanel(0,0,s_oSpriteLibrary.getSprite("bg_help"),
Z);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.setTeams=function(H,Q){Z=H;ca=Q};this.setTeamsFlagScoreBoard=function(H){z.changeOpponentTeamFlag(H)};this.refreshButtonPos=function(H,Q){t.setPosition(c-H,Q+l);u.setPosition(b-H,Q+e);ba.setPosition(p.x+H,p.y);L.setPosition(B.x-H,B.y);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||A.setPosition(k-H,Q+q);Y&&screenfull.isEnabled&&X.setPosition(f-s_iOffsetX,g+s_iOffsetY);var O=z.getStartPosition();z.setPosition(O.x,O.y+Q);O=E.getStartPosition();E.setPosition(O.x+
H,O.y+Q);O=G.getStartPosition();G.setPosition(O.x+H,O.y-Q);O=D.getStartPosition();D.setPosition(O.x-H,O.y-Q)};this.unload=function(){t.unload();t=null;x&&x.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A.unload(),A=null;Y&&screenfull.isEnabled&&X.unload();s_oInterface=null};this.refreshResult=function(H,Q){z.refresh(H+" - "+Q)};this.refreshTime=function(H){E.refresh(H)};this.onExitFromHelp=function(){this.unloadHelpPanel();var H=s_oSpriteLibrary.getSprite("msg_box");this.createVsPanel(H,Z,
ca,null,null,0)};this.crowdEffectOn=function(){var H=(void 0).getPosition(),Q=s_oSpriteLibrary.getSprite("crowd_on");H.y+=.3*Q.height;(void 0).crowOn(s_oSpriteLibrary.getSprite("crowd_on"),H.x,H.y,750)};this.createEndMatchText=function(H,Q,O,m,M){var S=new createjs.Container;S.x=.5*CANVAS_WIDTH;S.y=-50;(new CTLText(S,-300,0,600,100,50,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_FINISH,!0,!0,!1,!1)).setStroke(5,"#ff6000");s_oStage.addChild(S);createjs.Tween.get(S).to({y:TWEEN_END_MACTH_Y},1250,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(S).to({scaleX:0,
scaleY:0},500,createjs.Ease.quartIn).call(function(){O?s_oInterface.createWinPanel(H,Q,m,M):s_oInterface.createLosePanel(H,Q,m);setVolume("soundtrack",1);s_oGame.unpause(!1);s_oStage.removeChild(S)})})};this.createExtendedTimeText=function(){var H=new createjs.Container;H.x=-100;H.y=.5*CANVAS_HEIGHT;(new CTLText(H,-300,0,600,100,50,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_TIME_EXTENDED,!0,!0,!0,!1)).setStroke(5,"#ff6000");s_oStage.addChild(H);createjs.Tween.get(H).to({x:.5*CANVAS_WIDTH},750,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(H).to({x:CANVAS_WIDTH+
100},750,createjs.Ease.cubicIn).call(function(){s_oGame.extendTime();s_oStage.removeChild(H)})})};this.createLosePanel=function(H,Q,O){n=new CLosePanel(s_oSpriteLibrary.getSprite("msg_box"));n.show(H,Q,Z,ca,O)};this.createWinPanel=function(H,Q,O,m){I=new CWinPanel(s_oSpriteLibrary.getSprite("msg_box"),m);I.show(H,Q,Z,ca,O)};this.createVsPanel=function(H,Q,O,m,M,S){v=new CVsPanel(H,Q,O,M,S);null!==m&&v.setChildIndex(m)};this.blockAllButton=function(H){t.block(H);u.block(H)};this.getScoreBoardResult=
function(){return z.getResult()};this.unloadHelpPanel=function(){x&&(x.unload(),x=null)};this.createGoalText=function(H,Q){var O=s_oSpriteLibrary.getSprite("goal_text");var m=createBitmap(O);m.regX=.5*O.width;m.regY=.5*O.height;m.x=H;m.y=Q;m.scaleX=0;m.scaleY=0;s_oStage.addChild(m);createjs.Tween.get(m).to({scaleX:1,scaleY:1},500,createjs.Ease.quadOut).call(function(){createjs.Tween.get(m).wait(500).to({scaleX:0,scaleY:0,alpha:0},500,createjs.Ease.quadOut).call(function(){s_oStage.removeChild(m)})})};
this._onExitVsPanel=function(){v.unload();v=null};this.createStartMatchText=function(){var H=new createjs.Container;H.x=.5*CANVAS_WIDTH;H.y=-50;r=new createjs.Shape;r.graphics.beginFill("black").drawRect(-CANVAS_WIDTH_HALF,-CANVAS_HEIGHT_HALF,CANVAS_WIDTH,CANVAS_HEIGHT);r.alpha=.01;r.on("click",function(){});H.addChild(r);(new CTLText(H,-300,0,600,100,50,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_KICK_OFF,!0,!0,!0,!1)).setStroke(5,"#ff6000");s_oStage.addChild(H);createjs.Tween.get(H).to({y:TWEEN_END_MACTH_Y},
1250,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(H).to({scaleX:0,scaleY:0},500,createjs.Ease.quartIn).call(function(){s_oGame.startMatch();r.off("click",function(){});s_oStage.removeChild(H)})})};this.createPauseInterface=function(){y=new CPause};this.refreshTurnNumber=function(H,Q){G.refreshTurn(H,Q)};this.refreshTurnTeam=function(H){G.setTurn(H)};this.refreshScore=function(H){D.refresh(H)};this.turnAnim=function(H){var Q=new createjs.Container;Q.x=-200;Q.y=CANVAS_HEIGHT_HALF;(new CTLText(Q,
-300,0,600,100,50,"center",TEXT_COLOR,FONT_GAME,1,0,0,H,!0,!0,!0,!1)).setStroke(5,"#ff6000");s_oStage.addChild(Q);createjs.Tween.get(Q).to({x:CANVAS_WIDTH_HALF},750,createjs.Ease.quartOut).call(function(){createjs.Tween.get(Q).wait(300).to({x:CANVAS_WIDTH+200},750,createjs.Ease.quartIn).call(function(){s_oStage.removeChild(Q)})})};this.unloadPause=function(){y.unload();y=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){(new CAreYouSurePanel(s_oStage)).show()};
this._onPause=function(){s_oGame.unpause(!1);this.createPauseInterface()};this.getScoreBoardResult=function(){return z.getResult()};this._createScrollButtons=function(){var H=s_oSpriteLibrary.getSprite("but_scroll");p={x:.5*H.width+10,y:.5*CANVAS_HEIGHT};ba=new CGfxButton(p.x,p.y,H,s_oStage);ba.addEventListenerWithParams(ON_MOUSE_DOWN,s_oGame.dirScrollWorld,this,{velocity:SCROLL_VELOCITY,press:!0,dir:LEFT_SCROLL_WORLD});ba.addEventListenerWithParams(ON_MOUSE_UP,s_oGame.dirScrollWorld,this,{velocity:SCROLL_VELOCITY,
press:!1,dir:LEFT_SCROLL_WORLD});B={x:CANVAS_WIDTH-.5*H.width-10,y:.5*CANVAS_HEIGHT};L=new CGfxButton(B.x,B.y,H,s_oStage);L.setScaleX(-1);L.addEventListenerWithParams(ON_MOUSE_DOWN,s_oGame.dirScrollWorld,this,{velocity:-SCROLL_VELOCITY,press:!0,dir:RIGHT_SCROLL_WORLD});L.addEventListenerWithParams(ON_MOUSE_UP,s_oGame.dirScrollWorld,this,{velocity:-SCROLL_VELOCITY,press:!1,dir:RIGHT_SCROLL_WORLD})};this.resetFullscreenBut=function(){Y&&screenfull.isEnabled&&X.setActive(s_bFullscreen)};this._onFullscreenRelease=
function(){s_bFullscreen?fa.call(window.document):Y.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a,h);return this}var s_oInterface=null;
function CHelpPanel(a,h,b,e){var c,l,f,g,k,q,p,B,t,u,x,A=!1;this._init=function(v,r,n,I){f=createBitmap(n);f.x=.5*CANVAS_WIDTH;f.y=.5*CANVAS_HEIGHT;f.regX=.5*n.width;f.regY=.5*n.height;g=new createjs.Container;g.x=v;g.y=r;q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);q.alpha=.5;q.on("pressup",function(){s_oHelpPanel._onExitHelp()},null,!0);g.addChild(q);g.addChild(f);s_oStage.addChild(g);k=new createjs.Container;k.alpha=0;this.page1(I,k);s_bMobile||(q.cursor=
"pointer")};this.page1=function(v,r){(new CTLText(r,CANVAS_WIDTH/2-300,.5*CANVAS_HEIGHT-160,600,32,32,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_CONTROLS,!0,!0,!1,!1)).setStroke(5,"#ff6000");var n=s_oSpriteLibrary.getSprite("players");c=CANVAS_WIDTH_HALF;l=270;B=new CArrow(c,l,r);B.animateMask(1E3);var I=new CPlayer(c,l,n,0,!1,!1,PLAYERS_USER,r);I.changeTeam(v);I.rotate(-1);I=s_bMobile?s_oSpriteLibrary.getSprite("help_touch"):s_oSpriteLibrary.getSprite("help_mouse");u=createBitmap(I);u.x=c-130;u.y=
l-10;u.regX=.5*I.width;u.regY=.5*I.height;r.addChild(u);this.animateInputPower(1E3);t=new CArrow(c,l+120,r);t.animateRotation(1E3);t.mask(100);x=createBitmap(I);x.x=c-150;x.y=l+120;x.regX=.5*I.width;x.regY=.5*I.height;r.addChild(x);n=new CPlayer(c,l+120,n,0,!1,!1,PLAYERS_USER,r);n.changeTeam(v);n.rotate(-1);this.animateInputRotate(1E3);createjs.Tween.get(r).to({alpha:1},300,createjs.Ease.cubicOut);n=s_oSpriteLibrary.getSprite("but_continue");p=new CGfxButton(.5*CANVAS_WIDTH+210,.5*CANVAS_HEIGHT+80,
n,r);p.addEventListener(ON_MOUSE_UP,this._onExitHelp,this);p.pulseAnimation();s_oStage.addChild(r)};this.animateInputPower=function(v){createjs.Tween.get(u).to({x:c-230},v,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(u).to({x:c-130},v,createjs.Ease.cubicInOut).call(function(){s_oHelpPanel.animateInputPower(v)})})};this.animateInputRotate=function(v){createjs.Tween.get(x).to({y:l+60},v,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(x).to({y:l+180},v,createjs.Ease.cubicInOut).call(function(){s_oHelpPanel.animateInputRotate(v)})})};
this.unload=function(){s_oStage.removeChild(g);s_oHelpPanel=null;q.off("pressup",function(){s_oHelpPanel._onExitHelp()},null,!0);p.unload();p=null;createjs.Tween.removeAllTweens()};this._onExitHelp=function(){A||(A=!0,playSound("click",1,!1),createjs.Tween.get(k).to({alpha:0},300,createjs.Ease.cubicOut).call(function(){s_oGame._onExitHelp()}))};s_oHelpPanel=this;this._init(a,h,b,e)}var s_oHelpPanel=null;
function CLosePanel(a){var h,b,e,c,l,f,g,k,q;this._init=function(p){q=new createjs.Shape;q.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);q.alpha=0;s_oStage.addChild(q);f=new createjs.Container;f.alpha=1;f.visible=!1;f.y=CANVAS_HEIGHT;h=createBitmap(p);h.x=CANVAS_WIDTH_HALF;h.y=CANVAS_HEIGHT_HALF;h.regX=.5*p.width;h.regY=.5*p.height;f.addChild(h);c=new CTLText(f,CANVAS_WIDTH/2-300,CANVAS_HEIGHT/2-100,600,30,30,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);c.setStroke(5,
"#ff6000");b=new createjs.Text("","26px "+FONT_GAME,"#ff6000");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2;b.textAlign="center";b.textBaseline="middle";b.outline=4;f.addChild(b);e=new createjs.Text("","26px "+FONT_GAME,TEXT_COLOR);e.x=CANVAS_WIDTH/2;e.y=b.y;e.textAlign="center";e.textBaseline="middle";f.addChild(e);l=new CTLText(f,CANVAS_WIDTH/2-300,104,600,50,50,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);l.setStroke(5,"#ff6000");s_oStage.addChild(f);p=s_oSpriteLibrary.getSprite("but_home");
g=new CGfxButton(.5*CANVAS_WIDTH-310,.5*CANVAS_HEIGHT+150,p,f);g.addEventListener(ON_MOUSE_DOWN,this._onExit,this);p=s_oSpriteLibrary.getSprite("but_restart");k=new CGfxButton(.5*CANVAS_WIDTH+310,.5*CANVAS_HEIGHT+150,p,f);k.addEventListener(ON_MOUSE_DOWN,this._onRestart,this);k.pulseAnimation()};this.unload=function(){createjs.Tween.get(f).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(f);g.unload();g=null;q.removeAllEventListeners();k.unload();k=null})};this.show=function(p,
B,t,u,x){var A=TEXT_TEAM_CODE[t],v=TEXT_TEAM_CODE[u];c.refreshText(TEXT_TOTAL_SCORE+": "+x);e.text=A+" "+p+" - "+B+" "+v;b.text=A+" "+p+" - "+B+" "+v;l.refreshText(TEXT_LOSE);p=s_oSpriteLibrary.getSprite("flags_small");new CFlag(e.x-160,e.y,t,!1,p,f);new CFlag(e.x+160,e.y,u,!1,p,f);f.visible=!0;createjs.Tween.get(q).to({alpha:.5},500,createjs.Ease.cubicOut);q.on("click",function(){});createjs.Tween.get(f).wait(250).to({y:0},1250,createjs.Ease.elasticOut).call(function(){s_oAdsLevel===NUM_LEVEL_FOR_ADS?
($(s_oMain).trigger("show_interlevel_ad"),s_oAdsLevel=1):s_oAdsLevel++})};this._onRestart=function(){this.unload();createjs.Tween.get(q).to({alpha:0},400,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(q)});s_oGame.restartLevel()};this._onExit=function(){this.unload();s_oGame.onExit()};this._init(a);return this}
function CWinPanel(a,h){var b,e,c,l,f,g,k,q,p,B,t,u;this._init=function(x,A){u=new createjs.Shape;u.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);u.alpha=0;s_oStage.addChild(u);p=new createjs.Container;p.alpha=1;p.visible=!1;p.y=CANVAS_HEIGHT;b=createBitmap(x);b.x=CANVAS_WIDTH_HALF;b.y=CANVAS_HEIGHT_HALF;b.regX=.5*x.width;b.regY=.5*x.height;p.addChild(b);q=new CTLText(p,CANVAS_WIDTH/2-300,CANVAS_HEIGHT_HALF-210,600,40,40,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);
q.setStroke(5,"#ff6000");e=new createjs.Text("","26px "+FONT_GAME,"#ff6000");e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2-90;e.textAlign="center";e.textBaseline="middle";e.outline=5;p.addChild(e);c=new createjs.Text("","26px "+FONT_GAME,TEXT_COLOR);c.x=CANVAS_WIDTH/2;c.y=e.y;c.textAlign="center";c.textBaseline="middle";p.addChild(c);l=new CTLText(p,CANVAS_WIDTH/2-300,CANVAS_HEIGHT_HALF-20,600,24,24,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);l.setStroke(3,"#ff6000");f=new CTLText(p,CANVAS_WIDTH/
2-300,CANVAS_HEIGHT_HALF+20,600,24,24,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);f.setStroke(3,"#ff6000");g=new CTLText(p,CANVAS_WIDTH/2-300,CANVAS_HEIGHT_HALF+60,600,24,24,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);g.setStroke(3,"#ff6000");k=new CTLText(p,CANVAS_WIDTH/2-200,CANVAS_HEIGHT_HALF+100,400,24,24,"center",TEXT_COLOR,FONT_GAME,1,0,0," ",!0,!0,!1,!1);k.setStroke(3,"#ff6000");var v=s_oSpriteLibrary.getSprite("but_continue");t=new CGfxButton(.5*CANVAS_WIDTH+310,.5*CANVAS_HEIGHT+
150,v,p);t.pulseAnimation();!1===A?(v=s_oSpriteLibrary.getSprite("but_home"),B=new CGfxButton(.5*CANVAS_WIDTH-310,.5*CANVAS_HEIGHT+150,v,p),B.addEventListener(ON_MOUSE_DOWN,this._onExit,this),t.addEventListener(ON_MOUSE_DOWN,this._onContinue,this)):t.addEventListener(ON_MOUSE_DOWN,this._onEnd,this);s_oStage.addChild(p)};this.unload=function(){s_oStage.removeChild(p);B&&(B.unload(),B=null);t&&(t.unload(),t=null)};this.show=function(x,A,v,r,n){var I=TEXT_TEAM_CODE[v],z=TEXT_TEAM_CODE[r];c.text=I+" "+
x+" - "+A+" "+z;e.text=I+" "+x+" - "+A+" "+z;q.refreshText(TEXT_WIN);l.refreshText(TEXT_SCORE_GOAL_PLAYER+" "+n.player_goal_score);f.refreshText(TEXT_SCORE_GOAL_OPPONENT+" "+n.opponent_goal_score);g.refreshText(TEXT_MACTH_SCORE+": "+n.score_match);k.refreshText(TEXT_TOTAL_SCORE+": "+n.new_score);x=s_oSpriteLibrary.getSprite("flags_small");new CFlag(c.x-160,c.y,v,!1,x,p);new CFlag(c.x+160,c.y,r,!1,x,p);p.visible=!0;createjs.Tween.get(u).to({alpha:.5},500,createjs.Ease.cubicOut);createjs.Tween.get(p).wait(250).to({y:0},
1250,createjs.Ease.bounceOut).call(function(){s_oAdsLevel===NUM_LEVEL_FOR_ADS?($(s_oMain).trigger("show_interlevel_ad"),s_oAdsLevel=1):s_oAdsLevel++});$(s_oMain).trigger("save_score",n.new_score);$(s_oMain).trigger("share_event",n.new_score)};this._onContinue=function(){var x=this;createjs.Tween.get(p).to({y:CANVAS_HEIGHT},750,createjs.Ease.quartIn).call(function(){x.unload()});createjs.Tween.get(u).to({alpha:0},400,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(u);u.removeAllEventListeners()});
t.block(!0);B.block(!0);s_oGame.onContinue(s_oStage.getChildIndex(p))};this._onEnd=function(){t.block(!0);this.unload();s_oGame._onEnd()};this._onExit=function(){this.unload();u.off("click",function(){});s_oGame.onExit()};this._init(a,h);return this}
function CBall(a,h,b,e,c){var l,f,g,k,q,p,B,t,u,x,A,v,r=0,n=0;this._init=function(z,E,G,D){g=new createjs.Container;g.x=z;g.y=E;this.createShadow();var y=new createjs.SpriteSheet({images:[G],frames:{width:G.width/7,height:G.height,regX:G.width/2/7,regY:G.height/2}});k=createSprite(y,0,G.width/2/7,G.height/2,G.width/7,G.height/2);k.stop();g.addChild(k);p=new CVector2;p.set(g.x,g.y);B=new CVector2;B.set(0,0);t=new CVector2;t.set(0,0);x=D;l=z;f=E;A=.5*G.width/7;v=A*A;u=new CVector2;u.set(0,0);I.addChild(g)};
this.createShadow=function(){var z=s_oSpriteLibrary.getSprite("player_shadow");q=createBitmap(z);q.regX=.5*z.width;q.regY=-7;q.scaleX=.8;q.scaleY=.8;g.addChild(q)};this.unload=function(){I.removeChild(g)};this.setVisible=function(z){g.visible=z};this.setPosition=function(z,E){g.x=z;g.y=E};this.resetPos=function(){g.x=l;g.y=f;p.set(g.x,g.y);t.set(0,0);u.set(0,0)};this.setAngle=function(z){k.rotation=z};this.getX=function(){return g.x};this.getY=function(){return g.y};this.scale=function(z){g.scaleX=
z;g.scaleY=z};this.getScale=function(){return g.scaleX};this.vTmpForce=function(){return t};this.type=function(){return BALL};this.vCurForce=function(){return u};this.vPos=function(){return p};this.vPrevPos=function(){return B};this.getRadius=function(){return A};this.getRadiusQuadro=function(){return v};this.addForce=function(z){t.addV(z)};this.setPosVector=function(){g.x=p.getX();g.y=p.getY()};this.isGoalKeeper=function(){return!1};this.getID=function(){return x};this.rolls=function(){var z=u.getX(),
E=1;0>z&&(E=-1);z=Math.abs(z);4<z?k.rotation+=10*E:3<z?(r++,2===r&&(k.rotation+=8*E,r=0)):1<z?(r++,3===r&&(k.rotation+=4*E,r=0)):z>MIN_PLAYER_FORCE_VEL&&(r++,4===r&&(k.rotation+=2*E,r=0));z=Math.abs(u.getY());E=this._goToPrevFrame;0>u.getY()&&(E=this._goToNextFrame);5<z?E():3<z?(r++,2<r&&(E(),r=0)):1<z?(r++,3<r&&(E(),r=0)):z>MIN_PLAYER_FORCE_VEL&&(r++,4<r&&(E(),r=0))};this._goToPrevFrame=function(){0===n?n=6:n--;k.gotoAndStop(n)};this._goToNextFrame=function(){7===n?n=1:n++;k.gotoAndStop(n)};this.getChildIndex=
function(){I.getChildIndex(g)};this.setChildIndex=function(z){I.setChildIndex(g,z)};this.getObject=function(){return g};var I=c;this._init(a,h,b,e);return this}
function CPlayer(a,h,b,e,c,l,f,g){var k,q,p,B,t,u,x,A,v,r,n,I,z,E,G,D=!1,y;this._init=function(L,Z,ca,X,Y,fa,H){u=ca;t=new createjs.Container;t.x=L;t.y=Z;this.createShadow();ca=new createjs.SpriteSheet({images:[H],frames:{width:H.width/12,height:H.height/3,regX:H.width/2/12,regY:H.height/3+PLAYER_REGY_OFFSET}});p=createSprite(ca,0,H.width/2/12,H.height/3+PLAYER_REGY_OFFSET,H.width/12,H.height/3);p.stop();t.addChild(p);n=new CVector2;n.set(t.x,t.y);I=new CVector2;I.set(0,0);z=new CVector2;z.set(0,
0);E=new CVector2;E.set(0,0);(G=Y)?(x=PLAYERS_KEEPER_RADIUS,A=PLAYERS_KEEPER_RADIUS*PLAYERS_KEEPER_RADIUS):(x=PLAYERS_RADIUS,A=PLAYERS_RADIUS*PLAYERS_RADIUS);v=fa;k=L;q=Z;if(y=X)this._initListner(),p.cursor="pointer";B.x=p.x;B.y=p.y;ba.addChild(t)};this._initListner=function(){p.on("mousedown",this.onSelect);p.on("pressmove",this.onPressMove);p.on("pressup",this.onPressUp)};this.getX=function(){return t.x};this.getY=function(){return t.y};this.resetPos=function(){t.x=k;t.y=q;n.set(t.x,t.y);z.set(0,
0);E.set(0,0)};this.createShadow=function(){var L=s_oSpriteLibrary.getSprite("player_shadow");B=createBitmap(L);B.regX=.5*L.width;t.addChild(B)};this.onSelect=function(){s_oGame.onPlayerSelect({pos:{x:t.x,y:t.y},id:u})};this.onPressMove=function(){s_oGame.onPressMove()};this.onPressUp=function(){s_oGame.onPressUp({x:t.x,y:t.y})};this.isGoalKeeper=function(){return G};this.setPosition=function(L,Z){null!==L&&(t.x=L);null!==Z&&(t.y=Z)};this.rotate=function(L){t.scaleX=L};this.setVisible=function(L){t.visible=
L};this.changeTeam=function(L){p.gotoAndStop(L);r=L};this.getTeam=function(){return r};this.vTmpForce=function(){return z};this.vCurForce=function(){return E};this.vPos=function(){return n};this.vPrevPos=function(){return I};this.animDangle=function(){D||(D=!0,createjs.Tween.get(p).to({rotation:DANGLE_DEGREE},250,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:-DANGLE_DEGREE},250,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:.5*DANGLE_DEGREE},
300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:.5*-DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:.1*DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:.1*-DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(p).to({rotation:0},300,createjs.Ease.cubicOut).call(function(){D=!1})})})})})})}))};this.setPosVector=function(){t.x=n.getX();t.y=n.getY()};this.getRadius=
function(){return x};this.getID=function(){return u};this.type=function(){return v};this.getRadiusQuadro=function(){return A};this.addForce=function(L){z.addV(L)};this.getChildIndex=function(){return ba.getChildIndex(t)};this.setChildIndex=function(L){ba.setChildIndex(t,L)};this.getObject=function(){return t};this.unload=function(){y&&(p.off("mousedown",this.onSelect),p.off("pressmove",this.onPressMove),p.off("pressup",this.onPressUp));ba.removeChild(p);p=null};var ba=g;this._init(a,h,e,c,l,f,b)}
function CTurnPlayer(a,h,b,e){var c;this._init=function(f,g,k){var q=new createjs.SpriteSheet({images:[k],frames:{width:k.width/10,height:k.height/3,regX:k.width/2/10,regY:k.height/3},animations:{rotate:[0,29,"rotate",.7]}});c=createSprite(q,"rotate",k.width/2/10,k.height/3,k.width/10,k.height/3);c.x=f;c.y=g;l.addChild(c)};this.gotoAndStopAnim=function(f){c.gotoAndStop(f)};this.stopAnim=function(){c.stop()};this.playAnim=function(){c.play()};this.getX=function(){return c.x};this.getY=function(){return c.y};
this.setPosition=function(f,g){c.x=f;c.y=g};this.setScale=function(f){c.scaleX=f;c.scaleY=f};this.setVisible=function(f){c.visible=f};this.unload=function(){l.removeChild(c)};var l=e;this._init(a,h,b);return this}
function CFlag(a,h,b,e,c,l){var f=null,g=null,k,q=null,p,B,t=!1,u=!1;this._init=function(A,v,r,n,I){var z=new createjs.SpriteSheet({images:[r],frames:{width:r.width/6,height:r.height/6,regX:r.width/2/6,regY:r.height/2/6}});k=createSprite(z,n,r.width/2/6,r.height/2/6,r.width/6,r.height/6);k.gotoAndStop(n);k.x=A;k.y=v;B=p=1;x.addChild(k);if(u=I)s_bMobile||(k.cursor="pointer"),this._initListener(),f=[],g=[]};this.unload=function(){u&&(k.off("mousedown",this.buttonDown),k.off("pressup",this.buttonRelease));
x.removeChild(k)};this.setVisible=function(A){k.visible=A};this.setCursorType=function(A){k.cursor=A};this._initListener=function(){k.on("mousedown",this.buttonDown);k.on("pressup",this.buttonRelease)};this.addEventListener=function(A,v,r){f[A]=v;g[A]=r};this.addEventListenerWithParams=function(A,v,r,n){f[A]=v;g[A]=r;q=n};this.buttonRelease=function(){t||(k.scaleX=0<p?p:-p,k.scaleY=0<B?B:-B,playSound("click",1,!1),f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(g[ON_MOUSE_UP],q))};this.buttonDown=function(){t||
(k.scaleX=0<p?p-.1:-p+.1,k.scaleY=0<B?B-.1:-B+.1,f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],q))};this.rotation=function(A){k.rotation=A};this.getButton=function(){return k};this.setPosition=function(A,v){k.x=A;k.y=v};this.setX=function(A){k.x=A};this.setY=function(A){k.y=A};this.getButtonImage=function(){return k};this.block=function(A){t=A;k.scaleX=p;k.scaleY=B};this.setScaleX=function(A){p=k.scaleX=A};this.setScale=function(A){k.scaleX=A;B=p=k.scaleY=A};this.changeTeam=function(A){k.gotoAndStop(A)};
this.getX=function(){return k.x};this.getY=function(){return k.y};this.showAnimation=function(A,v){k.scaleX=0;k.scaleY=0;createjs.Tween.get(k).wait(A).to({scaleY:B,scaleX:p},v,createjs.Ease.elasticOut)};this.removeAllTweens=function(){createjs.Tween.removeTweens(k)};var x=l;this._init(a,h,c,b,e);return this}
function COpponent(a,h,b,e,c,l,f){var g,k,q,p,B,t,u=0,x,A,v,r,n,I,z,E,G=!1,D=!1,y=!1,ba=!1,L=!1,Z=!1,ca=!1,X,Y,fa,H,Q,O;this._init=function(m,M,S,V,N,F,T){E=T;T=new createjs.SpriteSheet({images:[S],frames:{width:S.width/8,height:S.height/7,regX:S.width/2/8,regY:S.height/2/7},animations:{idle:[0,11,"idle",.5],run:[12,22],shot:[23,28],head_shot_run:[29,37],head_shot_idle:[38,48],heel_shot:[49,55],reverse:{frames:[22,21,20,19,18,17,16,15,14,13,12]}}});g=createSprite(T,"idle",S.width/2/8,S.height/2/7,
S.width/8,S.height/7);g.x=m;g.y=M;g.scaleX=-1;p=S.width/8;Q=Y=H=fa=0;O=TIME_TRY_TO_SHOT_BALL_OPPONENT;z=F;m=p;k=CANVAS_WIDTH+-p;q=m;t=V;B=CHARACTER_SPEED*t;x=OPPONENT_DISTANCE_PROTECTION;I=N;E.addChild(g)};this.setChildIndex=function(m){E.setChildIndex(g,m)};this.getChildIndex=function(){return E.getChildIndex(g)};this.getX=function(){return g.x};this.getY=function(){return g.y};this.removeAllComponent=function(){!0===G?(s_oGame.removeLeg(v),G=!1):!0===D?(s_oGame.removeHead(r),D=!1):!0===y&&(s_oGame.removeLeg(n),
y=!1)};this.setPosition=function(m,M){null!==m&&(g.x=m);null!==M&&(g.y=M)};this.rotate=function(m){g.scaleX=m};this.changeState=function(m){g.gotoAndPlay(m);"shot"!==m&&"head_shot_run"!==m&&"head_shot_idle"!==m&&"heel_shot"!==m||this._onFinishAnimation()};this.stopAnimation=function(){g.stop()};this.playAnimation=function(){g.play()};this._onFinishAnimation=function(){g.on("animationend",function(){0===u?(g.gotoAndPlay("idle"),A="idle"):-1===u?(g.gotoAndPlay("reverse"),A="reverse"):(g.gotoAndPlay("run"),
A="run");g.removeAllEventListeners()})};this.unload=function(){E.removeChild(g)};this.createHead=function(){r=I.addHead({x:g.x+OFFSET_HEAD_POS_OPPONENT.x,y:g.y+OFFSET_HEAD_POS_OPPONENT.y},OPPONENT_HEAD);D=!0};this.createHeel=function(){n=I.addLeg({x:g.x+OFFSET_HEEL_POS_OPPONENT.x,y:g.y+OFFSET_HEEL_POS_OPPONENT.y},OPPONENT_HEEL);y=!0};this.createLeg=function(){v=I.addLeg({x:g.x+OFFSET_LEG_POS_OPPONENT.x,y:g.y+OFFSET_LEG_POS_OPPONENT.y},OPPONENT_LEG);G=!0};this.getLegShoot=function(){return G};this.getHeadShoot=
function(){return D};this.getHeelShoot=function(){return y};this.protectTheGoal=function(m,M,S,V,N){10<m||-10>m?g.x<M?this.move(1,z):g.x>M&&this.move(-1,z):this.move(0,z);this.shot(S,V,N)};this.saveTheBallFromGoal=function(m,M){L=!0;10<M||-10>M?this.move(1,z):this.move(0,z);m<HEEL_SHOOT_DISTANCE_OPPONENT&&(0>=X?!1===y&&(this.createHeel(),this.changeState("heel_shot"),X=randomRange(REACT_OPP_FOR_HEEL_SHOOT.min,REACT_OPP_FOR_HEEL_SHOOT.max)):X-=1/createjs.Ticker.framerate)};this.move=function(m){1===
m?("reverse"!==A&&this.changeState("reverse"),A="reverse"):-1===m?("run"!==A&&this.changeState("run"),A="run"):0===m&&("idle"!==A&&this.changeState("idle"),A="idle");u=m;var M=s_oPhysicsController.getElementPosition(z.fixture1),S=s_oPhysicsController.getElementPosition(z.fixture2),V=s_oPhysicsController.getElementPosition(z.fixture3);M.x+=B*m;M.x>=k?M.x=k:M.x<=q&&(M.x=q);S.x=M.x+OPPONENT_COLLISION.sph_offset.x-OPPONENT_COLLISION.rec_offset.x;V.x=M.x+OPPONENT_COLLISION.rec_neck.x-OPPONENT_COLLISION.rec_offset.x;
s_oPhysicsController.setElementPosition(z.fixture1,M);s_oPhysicsController.setElementPosition(z.fixture2,S);s_oPhysicsController.setElementPosition(z.fixture3,V);g.x=M.x+OPPONENT_COLLISION.rec_center_width;g.y=M.y-OPPONENT_COLLISION.rec_offset.y};this.goToBall=function(m,M,S,V,N,F){S>MIN_DISTANCE_BETWEEN_PLAYER&&0<O||M.x<N.x||1>F?this.move(-1,z):0<O||g.x>STOP_BACK_WALK_POSITION?(this.move(0,z),O=0>=O?TIME_TRY_TO_SHOT_BALL_OPPONENT:O-V):S<GO_TO_DISTANCE&&N.x<M.x?this.move(1,z):O=TIME_TRY_TO_SHOT_BALL_OPPONENT;
this.shot(m,M,V)};this.shot=function(m,M,S){m<DISTANCE_START_SHOOT_OPPONENT&&(0>=H?(M.y<g.y?!1===D&&(this.createHead(),1===u||-1===u?this.changeState("head_shot_run"):this.changeState("head_shot_idle")):!1===G&&(this.createLeg(),this.changeState("shot")),H=randomRange(TIME_INTERVAL_SHOOT.min,TIME_INTERVAL_SHOOT.max)):H-=S)};this.checkAFinishedShoot=function(){if(!0===G){var m=s_oPhysicsController.getJointAngle(v.jointLeg),M={x:g.x+OFFSET_LEG_POS_OPPONENT.x,y:g.y+OFFSET_LEG_POS_OPPONENT.y};s_oPhysicsController.setElementPosition(v.fixture2,
M);m<=DELETE_LEG_ANGLE_OPPONENT&&(s_oGame.removeLeg(v),G=!1)}else!0===D?(m=s_oPhysicsController.getJointTranslation(r.joint),M={x:g.x+OFFSET_HEAD_POS_OPPONENT.x,y:g.y+OFFSET_HEAD_POS_OPPONENT.y},s_oPhysicsController.setElementPosition(r.fixture2,M),m>=PLAYER_HEAD.distance-.1&&(s_oGame.removeHead(r),D=!1)):!0===y&&(m=s_oPhysicsController.getJointAngle(n.jointLeg),M={x:g.x+OFFSET_HEEL_POS_OPPONENT.x,y:g.y+OFFSET_HEEL_POS_OPPONENT.y},s_oPhysicsController.setElementPosition(n.fixture2,M),m>=DELETE_HEEL_ANGLE_OPPONENT&&
(s_oGame.removeLeg(n),y=!1))};this.getAggressive=function(){return ca};this.setAggressive=function(m,M){x=(ca=m)?OPPONENT_DISTANCE_PROTECTION_AGG:OPPONENT_DISTANCE_PROTECTION[M]};this.setDistanceProtection=function(m){x=m};this.restart=function(){Z=L=ba=!1;Q=Y=H=fa=0;this.move(0,z)};this.activeProtectGoal=function(){!1===ba&&(ba=!0,Z=!1,Y=randomRange(TIME_REACTION_FROM_SAVE_TO_GO.min,TIME_REACTION_FROM_SAVE_TO_GO.max),H=randomRange(.5*TIME_INTERVAL_SHOOT.min,.5*TIME_INTERVAL_SHOOT.max),fa=randomRange(TIME_IN_PROTECT_STATE.min,
TIME_IN_PROTECT_STATE.max),O=TIME_TRY_TO_SHOT_BALL_OPPONENT)};this.activeGoToBall=function(){!1===Z&&(H=randomRange(.5*TIME_INTERVAL_SHOOT.min,.5*TIME_INTERVAL_SHOOT.max),O=TIME_TRY_TO_SHOT_BALL_OPPONENT,ba=!1,Z=!0)};this.chooseAction=function(m,M,S){L=!1;0>=Y?m>x&&M.x<BALL_VELOCITY_X_REACTION?this.activeProtectGoal():m<x||M.x>BALL_VELOCITY_X_REACTION_ATTACK?this.activeGoToBall():M.x<BALL_VELOCITY_X_REACTION_ATTACK?this.activeProtectGoal():this.activeGoToBall():Y-=S};this.decision=function(m,M,S,
V,N){g.x<m.x+M?(!1===L&&(X=randomRange(REACT_OPP_FOR_HEEL_SHOOT.min,REACT_OPP_FOR_HEEL_SHOOT.max)),L=!0,Z=ba=!1):this.chooseAction(S,V,N)};this.update=function(m,M,S,V){var N=1/createjs.Ticker.framerate;this.checkAFinishedShoot();var F=s_oGame.getBallSpritePos(),T=OBJECT[1][0].x,da=T-g.x,J=distanceV2({x:g.x,y:g.y},F),ja=distanceV2({x:g.x,y:g.y},S),aa=OFFSET_OPPONENT_FORWOARD_BALL+.2*(g.y-OPPONENT_COLLISION.recHeight-F.y);0>=Q?(this.decision(F,aa,J,M,N),Q=TIME_REFRESH_AI[V]):Q-=N;ba?0<fa?(this.protectTheGoal(da,
T,J,F,N),fa-=N):(ba=!1,Z=!0,Y=randomRange(TIME_AFTER_REACTION.min,TIME_AFTER_REACTION.max)):Z?this.goToBall(J,F,ja,N,S,M.x*M.x+M.y*M.y):L?this.saveTheBallFromGoal(J,da):this.move(0);s_oPhysicsController.setElementAngle(m.fixture1,0)};this._init(a,h,b,e,c,l,f)}
function CTeamChoose(){var a,h,b,e,c,l,f,g,k,q,p,B,t,u,x,A,v,r,n,I,z,E=null,G=null;this._init=function(){f=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(f);p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.alpha=.5;s_oStage.addChild(p);var D=s_oSpriteLibrary.getSprite("msg_box");g=createBitmap(D);g.x=.5*CANVAS_WIDTH;g.y=.5*CANVAS_HEIGHT;g.regX=.5*D.width;g.regY=.5*D.height;s_oStage.addChild(g);n=[];r=[];v=new createjs.Container;I=
0;D=s_oSpriteLibrary.getSprite("flags");x=new CFlag(928,293,0,!1,D,v);x.block(!0);D=START_POS_FLAG.x;for(var y=START_POS_FLAG.y,ba=s_oSpriteLibrary.getSprite("flags_small"),L=0;L<TOT_TEAM;L++){this._createFlag(L,D,y,Math.floor(500*Math.random()),1500,ba,v);var Z=s_oSpriteLibrary.getSprite("turn_"+L);n[L]=new CTurnPlayer(976,423,Z,v);n[L].setVisible(!1);n[L].setScale(.92);n[L].stopAnim();D<FLAG_LIMIT_POS_X?D+=FLAG_ADDED_POS.x:(D=START_POS_FLAG.x,y+=FLAG_ADDED_POS.y)}n[0].setVisible(!0);n[0].playAnim();
D=s_oSpriteLibrary.getSprite("team_selection");u=createBitmap(D);u.x=r[0].getX();u.y=r[0].getY()+3;u.regX=.5*D.width;u.regY=.5*D.height;s_oStage.addChild(v);v.y=0;q=new createjs.Container;(new CTLText(q,-300,0,600,48,48,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_SELECT_YOUR_TEAM,!0,!0,!1,!1)).setStroke(5,"#ff6000");q.x=682;q.y=105;s_oStage.addChild(q);A=new CTLText(s_oStage,300,478,600,48,48,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_TEAM[0],!0,!0,!1,!1);A.setStroke(5,"#ff6000");if(!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile)D=s_oSpriteLibrary.getSprite("audio_icon"),c=CANVAS_WIDTH-D.width/2-60,l=D.height/2+20,B=new CToggle(c,l,D,s_bAudioActive,s_oStage),B.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);D=window.document;y=D.documentElement;E=y.requestFullscreen||y.mozRequestFullScreen||y.webkitRequestFullScreen||y.msRequestFullscreen;G=D.exitFullscreen||D.mozCancelFullScreen||D.webkitExitFullscreen||D.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(E=!1);E&&screenfull.isEnabled&&(D=s_oSpriteLibrary.getSprite("but_fullscreen"),
a=D.width/4+10,h=D.height/2+20,z=new CToggle(a,h,D,s_bFullscreen,s_oStage),z.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));D=s_oSpriteLibrary.getSprite("but_continue_small");k=new CGfxButton(997,481,D,s_oStage);k.addEventListener(ON_MOUSE_UP,this._onButContinueRelease,this);k.pulseAnimation();D=s_oSpriteLibrary.getSprite("but_exit");b=CANVAS_WIDTH-D.height/2-20;e=D.height/2+20;t=new CGfxButton(b,e,D,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onExit,this);p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(p);createjs.Tween.get(p).to({alpha:0},1E3).call(function(){p.visible=!1;v.addChild(u)});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this._createFlag=function(D,y,ba,L,Z,ca,X){r[D]=new CFlag(y,ba,D,!0,ca,X);r[D].addEventListenerWithParams(ON_MOUSE_UP,this._onButTeamChoose,this,D);r[D].setScale(1);r[D].showAnimation(L,Z)};this.refreshButtonPos=function(D,y){t.setPosition(b-D,y+e);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||B.setPosition(c-D,y+l);E&&screenfull.isEnabled&&
z.setPosition(a+s_iOffsetX,h+s_iOffsetY)};this._onButTeamChoose=function(D){I!==D&&(n[D].setVisible(!0),n[D].playAnim(),x.changeTeam(D),u.x=r[D].getX(),u.y=r[D].getY()+3,A.refreshText(TEXT_TEAM[D]),n[I].setVisible(!1),n[I].stopAnim(),I=D)};this.unload=function(){for(var D=0;D<r.length;D++)r[D].unload(),r[D]=null;t.unload();t=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)B.unload(),B=null;E&&screenfull.isEnabled&&z.unload();s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oTeamChoose=
null};this._onExit=function(){this.unload();s_oMain.gotoMenu()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButContinueRelease=function(){this.unload();s_oMain.gotoGame(I)};this.resetFullscreenBut=function(){E&&screenfull.isEnabled&&z.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?G.call(window.document):E.call(window.document.documentElement);sizeHandler()};s_oTeamChoose=this;this._init()}var s_oTeamChoose=null;
function CVsPanel(a,h,b,e,c){var l,f,g,k,q,p,B,t,u,x,A,v,r,n;this._init=function(I,z,E,G,D){g=new createjs.Container;n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);n.alpha=.5;n.on("click",function(){});g.addChild(n);null!==I&&(k=createBitmap(I),k.x=.5*CANVAS_WIDTH,k.y=.5*CANVAS_HEIGHT,k.regX=.5*I.width,k.regY=.5*I.height,g.addChild(k));x=new createjs.Container;A=new createjs.Container;v=new createjs.Container;(new CTLText(g,.5*CANVAS_WIDTH-300,.5*CANVAS_HEIGHT-
200,600,32,32,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_MATCH+" "+(G+1),!0,!0,!1,!1)).setStroke(3,"#ff6000");I=s_oSpriteLibrary.getSprite("flags");q=new CFlag(.5*CANVAS_WIDTH-225,313,z,!1,I,x);q.setScale(.9);p=new CFlag(.5*CANVAS_WIDTH+225,313,E,!1,I,A);p.setScale(.9);z=s_oSpriteLibrary.getSprite("turn_"+z);t=new CTurnPlayer(.5*CANVAS_WIDTH-280,451,z,x);t.gotoAndStopAnim(21);t.setScale(.9);E=s_oSpriteLibrary.getSprite("turn_"+E);u=new CTurnPlayer(.5*CANVAS_WIDTH+280,451,E,A);u.gotoAndStopAnim(0);u.setScale(.9);
v.x=.5*CANVAS_WIDTH;v.y=.5*CANVAS_HEIGHT;g.addChild(x,A,v);null===D&&(D=0);createjs.Tween.get(A).wait(D).to({x:0},1E3,createjs.Ease.elasticOut);var y=this;createjs.Tween.get(x).wait(D).to({x:0},1E3,createjs.Ease.elasticOut).call(function(){y._createVsText(v);v.scaleX=9;v.scaleY=9;createjs.Tween.get(v).to({scaleX:1,scaleY:1},1E3,createjs.Ease.bounceOut).call(function(){y._createButContinue(g,.5*CANVAS_WIDTH,.5*CANVAS_HEIGHT+150)})});s_oStage.addChild(g)};this._createButContinue=function(I,z,E){l=z;
f=E;z=s_oSpriteLibrary.getSprite("but_continue");r=new CGfxButton(l,f,z,I);r.addEventListener(ON_MOUSE_UP,this._onExitVsPanel,this);r.pulseAnimation()};this._createVsText=function(I){B=new CTLText(I,-100,0,200,75,75,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_VS,!0,!0,!1,!1);B.setStroke(5,"#ff6000")};this.setChildIndex=function(I){s_oStage.setChildIndex(g,I)};this.unload=function(){n.off("click",function(){});s_oStage.removeChild(g)};this._onExitVsPanel=function(){this.unload();s_oGame._onExitVsPanel();
s_oInterface.unloadHelpPanel()};this._init(a,h,b,e,c);s_oVsPanel=this;return this}var s_oVsPanel=null;
function CGoal(a){var h,b,e,c,l;this._init=function(){h=[];var g=s_oSpriteLibrary.getSprite("goal_bottom");b=createBitmap(g);b.x=POS_GOAL_PLAYER_BOTTOM.x;b.y=POS_GOAL_PLAYER_BOTTOM.y;b.regX=.5*g.width;b.regy=.5*g.heigth;f.addChild(b);h[0]=b;e=createBitmap(g);e.x=POS_GOAL_OPPONENT_BOTTOM.x;e.y=POS_GOAL_OPPONENT_BOTTOM.y;e.regX=.5*g.width;e.regy=.5*g.heigth;e.scaleX=-1;f.addChild(e);h[1]=e};this.createGoalFront=function(){var g=s_oSpriteLibrary.getSprite("goal_top");c=createBitmap(g);c.x=POS_GOAL_PLAYER_FRONT.x;
c.y=POS_GOAL_PLAYER_FRONT.y+g.height;c.regX=.5*g.width;c.regY=g.height;f.addChild(c);h[2]=c;l=createBitmap(g);l.x=POS_GOAL_OPPONENT_FRONT.x;l.y=POS_GOAL_OPPONENT_FRONT.y+g.height;l.regX=.5*g.width;l.regY=g.height;l.scaleX=-1;f.addChild(l);h[3]=l};this.getGoalEnemyFront=function(){return l};this.getGoalPlayerFront=function(){return c};this.unload=function(){for(var g=0;g<h.length;g++)f.removeChild(h[g])};var f=a;this._init();return this}
function CScoreBoard(a,h,b,e,c){var l,f,g,k,q,p,B;this._init=function(t,u,x,A,v){l={x:u,y:x};f=new createjs.Container;f.x=l.x;f.y=l.y;g=createBitmap(t);g.x=0;g.y=-3;g.regX=.5*t.width;g.regY=0;f.addChild(g);q=new createjs.Text(" 0 - 0 ","24px "+FONT_GAME,"#ff6000");q.x=0;q.y=.5*t.height-3;q.textAlign="center";q.textBaseline="middle";q.outline=5;f.addChild(q);k=new createjs.Text(" 0 - 0 ","24px "+FONT_GAME,TEXT_COLOR);k.x=0;k.y=q.y;k.textAlign="center";k.textBaseline="middle";f.addChild(k);t=s_oSpriteLibrary.getSprite("flags_small");
p=new CFlag(-65,23,A,!1,t,f);p.setScale(.7);B=new CFlag(65,23,v,!1,t,f);B.setScale(.7);s_oStage.addChild(f)};this.changeOpponentTeamFlag=function(t){B.changeTeam(t)};this.getStartPosition=function(){return l};this.setPosition=function(t,u){f.x=t;f.y=u};this.unload=function(){s_oStage.removeChild(f)};this.refresh=function(t){q.text=t;k.text=t};this.getResult=function(){return k.text};this._init(a,h,b,e,c);return this}
function CTimeBoard(a,h,b){var e,c,l,f;this._init=function(g,k,q){e={x:k,y:q};c=new createjs.Container;c.x=e.x;c.y=e.y;l=createBitmap(g);l.x=0;l.y=0;l.regX=0;l.regY=0;c.addChild(l);f=new CTLText(c,.5*g.width-75,14,150,22,22,"left",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_TIME+": 0",!0,!0,!1,!1);f.setStroke(3,"#ff6000");s_oStage.addChild(c)};this.getStartPosition=function(){return e};this.setPosition=function(g,k){c.x=g;c.y=k};this.unload=function(){s_oStage.removeChild(c)};this.refresh=function(g){f.refreshText(g)};
this._init(a,h,b);return this}
function CTurnBoard(a,h,b){var e,c,l,f,g;this._init=function(k,q,p){g=[];e={x:q,y:p};c=new createjs.Container;c.x=e.x;c.y=e.y;l=createBitmap(k);l.x=0;l.y=0;l.regX=0;l.regY=0;c.addChild(l);q=s_oSpriteLibrary.getSprite("players");f=new CPlayer(30,27,q,-1,!1,!1,0,c);f.rotate(-1);k=s_oSpriteLibrary.getSprite("turn_ball");q=FIRST_POS_X_TURN_BALL;p=27;for(var B=0;B<NUM_OF_SHOT;B++)g[B]=this.createTurnBall(q,p,k),c.addChild(g[B]),q+=STEP_POS_X_TURN_BALL;s_oStage.addChild(c)};this.createTurnBall=function(k,
q,p){var B=createBitmap(p);B.x=k;B.y=q;B.regX=.5*p.width;B.regY=.5*p.height;return B};this.getStartPosition=function(){return e};this.setPosition=function(k,q){c.x=k;c.y=q};this.unload=function(){s_oStage.removeChild(c)};this.refreshTurn=function(k,q){g[k].visible=q};this.setTurn=function(k){f.changeTeam(k)};this._init(a,h,b);return this}
function CCongratulations(a,h){var b,e,c,l,f,g,k,q,p,B,t,u;this._init=function(x,A){l=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(l);B=new createjs.Shape;B.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);B.alpha=.5;s_oStage.addChild(B);var v=s_oSpriteLibrary.getSprite("msg_box");f=createBitmap(v);f.x=.5*CANVAS_WIDTH;f.y=.5*CANVAS_HEIGHT;f.regX=.5*v.width;f.regY=.5*v.height;s_oStage.addChild(f);var r=s_oSpriteLibrary.getSprite("but_home");b=CANVAS_WIDTH/
2;g=new CGfxButton(b,470,r,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onButMenuRelease,this);g.pulseAnimation();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-r.height/2-10,c=r.height/2+10,u=new CToggle(e,c,r,s_bAudioActive,s_oStage),u.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);k=new CTLText(s_oStage,CANVAS_WIDTH/2-v.width/2+20,.5*CANVAS_HEIGHT-210,v.width-40,72,36,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_CONGRATULATIONS,!0,!0,
!0,!1);k.setStroke(5,"#ff6000");r=this.createResultText(x);q=new CTLText(s_oStage,CANVAS_WIDTH/2-v.width/2+20,.5*CANVAS_HEIGHT+r.offsetY,v.width-40,30,30,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_TOTAL_SCORE+": "+A,!0,!0,!1,!1);q.setStroke(5,"#ff6000");v=s_oSpriteLibrary.getSprite("trophy");p=createBitmap(v);p.x=406;p.y=.5*-v.height;p.regX=.5*v.width;p.regY=.5*v.height;s_oStage.addChild(p);createjs.Tween.get(p).wait(r.time).to({y:431},1E3,createjs.Ease.bounceOut);var n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(n);createjs.Tween.get(n).to({alpha:0},1E3).call(function(){s_oStage.removeChild(n)});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.createResultText=function(x){t=new createjs.Container;var A=-120,v=200,r=!1,n=0;1===TOT_MATCH%2&&(r=!0,n=TOT_MATCH-1);for(var I=0;I<x.length;I++,v+=150){var z=new createjs.Container;z.alpha=0;var E=x[I].result,G=I+1;var D=new createjs.Text(E,"28px "+FONT_GAME,"#ff6000");D.x=0;D.y=3;D.textAlign="center";D.outline=5;z.addChild(D);
E=new createjs.Text(E,"28px "+FONT_GAME,TEXT_COLOR);E.x=0;E.y=3;E.textAlign="center";z.addChild(E);E=new createjs.Text(G+".","28px "+FONT_GAME,"#ff6000");E.x=-100;E.y=3;E.textAlign="center";E.outline=5;z.addChild(E);G=new createjs.Text(G+".","28px "+FONT_GAME,TEXT_COLOR);G.x=E.x;G.y=3;G.textAlign="center";z.addChild(G);G=s_oSpriteLibrary.getSprite("flags_small");(new CFlag(-65,15,x[I].player_team,!1,G,z)).setScale(.7);(new CFlag(65,15,x[I].opponent_team,!1,G,z)).setScale(.7);z.y=.5*CANVAS_HEIGHT+
A;0===I%2?(G=n===I&&r?.5*CANVAS_WIDTH:.5*CANVAS_WIDTH-250,z.x=-100):(z.x=CANVAS_WIDTH+100,G=.5*CANVAS_WIDTH+250,A+=40);createjs.Tween.get(z).wait(v).to({x:G,alpha:1},500,createjs.Ease.cubicIn);t.addChild(z)}s_oStage.addChild(t);return{offsetY:A+50,time:v+150}};this.refreshButtonPos=function(x,A){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||u.setPosition(e-x,A+c)};this.unload=function(){g.unload();g=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)u.unload(),u=null;s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();
s_oCongratulations=null};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButMenuRelease=function(){this.unload();s_oMain.gotoMenu()};s_oCongratulations=this;this._init(a,h)}var s_oCongratulations=null;
function CCreditsPanel(){var a,h,b,e,c,l,f,g,k;this._init=function(){k=new createjs.Container;s_oStage.addChild(k);var q=s_oSpriteLibrary.getSprite("msg_box");c=new createjs.Shape;c.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.5;g=c.on("click",this._onLogoButRelease);c.cursor="pointer";k.addChild(c);h=createBitmap(q);h.x=CANVAS_WIDTH_HALF;h.y=CANVAS_HEIGHT_HALF;h.regX=.5*q.width;h.regY=.5*q.height;k.addChild(h);q=s_oSpriteLibrary.getSprite("but_exit");a=.5*CANVAS_WIDTH+
330;e=new CGfxButton(a,140,q,k);e.addEventListener(ON_MOUSE_UP,this.unload,this);q=s_oSpriteLibrary.getSprite("logo_ctl");b=createBitmap(q);b.regX=q.width/2;b.regY=q.height/2;b.x=CANVAS_WIDTH/2;b.y=300;k.addChild(b);f=new createjs.Text("www.codethislab.com","36px "+FONT_GAME,"#ff6000");f.textAlign="center";f.textBaseline="alphabetic";f.x=CANVAS_WIDTH/2;f.y=530;f.outline=5;k.addChild(f);l=new createjs.Text("www.codethislab.com","36px "+FONT_GAME,TEXT_COLOR);l.textAlign="center";l.textBaseline="alphabetic";
l.x=f.x;l.y=f.y;k.addChild(l)};this.unload=function(){c.off("click",g);e.unload();e=null;s_oStage.removeChild(k)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()}
function CPause(){var a;this._init=function(){var h=new createjs.Container;h.alpha=0;a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=.5;var b=new createjs.Shape;b.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.hitArea=b;a.on("click",function(){});h.addChild(a);(new CTLText(h,CANVAS_WIDTH/2-300,.5*CANVAS_HEIGHT-130,600,50,50,"center",TEXT_COLOR,FONT_GAME,1,0,0,TEXT_PAUSE,!0,!0,!1,!1)).setStroke(5,"#ff6000");b=s_oSpriteLibrary.getSprite("but_continue");
(new CGfxButton(.5*CANVAS_WIDTH,.5*CANVAS_HEIGHT+70,b,h)).addEventListenerWithParams(ON_MOUSE_UP,this._onLeavePause,this,h);s_oStage.addChild(h);createjs.Tween.get(h).to({alpha:1},300,createjs.quartOut)};this.unload=function(){a.off("click",function(){});s_oStage.removeChild(void 0)};this._onLeavePause=function(h){createjs.Tween.get(h).to({alpha:0},300,createjs.quartIn).call(function(){s_oInterface.unloadPause();s_oGame.unpause(!0)})};this._init();return this}
function CAreYouSurePanel(a){var h,b,e,c,l,f;this._init=function(){l=new createjs.Container;l.visible=!1;g.addChild(l);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=.5;f.on("click",function(){});l.addChild(f);var k=s_oSpriteLibrary.getSprite("msg_box");h=createBitmap(k);h.x=CANVAS_WIDTH_HALF;h.y=CANVAS_HEIGHT_HALF;h.regX=.5*k.width;h.regY=.5*k.height;l.addChild(h);b=new CTLText(l,CANVAS_WIDTH/2-k.width/2+20,100,k.width-40,250,50,"center",TEXT_COLOR,
FONT_GAME,1,0,0,TEXT_ARE_SURE,!0,!0,!0,!1);b.setStroke(5,"#ff6000");e=new CGfxButton(CANVAS_WIDTH/2+310,.5*CANVAS_HEIGHT+150,s_oSpriteLibrary.getSprite("but_yes"),l);e.addEventListener(ON_MOUSE_UP,this._onButYes,this);c=new CGfxButton(CANVAS_WIDTH/2-310,.5*CANVAS_HEIGHT+150,s_oSpriteLibrary.getSprite("but_not"),l);c.addEventListener(ON_MOUSE_UP,this._onButNo,this)};this.show=function(){s_oGame.unpause(!1);l.visible=!0};this._onButYes=function(){s_oGame.unpause(!0);s_oGame.onExit();f.removeAllEventListeners()};
this._onButNo=function(){s_oGame.unpause(!0);l.visible=!1;f.removeAllEventListeners()};var g=a;this._init()}
function CVector2(a,h){var b,e;this._init=function(c,l){b=c;e=l};this.add=function(c,l){b+=c;e+=l};this.addV=function(c){b+=c.getX();e+=c.getY()};this.scalarDivision=function(c){b/=c;e/=c};this.subtract=function(c){b-=c.getX();e-=c.getY()};this.scalarProduct=function(c){b*=c;e*=c};this.invert=function(){b*=-1;e*=-1};this.dotProduct=function(c){return b*c.getX()+e*c.getY()};this.set=function(c,l){b=c;e=l};this.setV=function(c){b=c.getX();e=c.getY()};this.length=function(){return Math.sqrt(b*b+e*e)};
this.length2=function(){return b*b+e*e};this.normalize=function(){var c=this.length();0<c&&(b/=c,e/=c)};this.angleBetweenVectors=function(c){c=Math.acos(this.dotProduct(c)/(this.length()*c.length()));return!0===isNaN(c)?0:c};this.getNormalize=function(c){this.length();c.set(b,e);c.normalize()};this.rot90CCW=function(){var c=b;b=-e;e=c};this.rot90CW=function(){var c=b;b=e;e=-c};this.getRotCCW=function(c){c.set(b,e);c.rot90CCW()};this.getRotCW=function(c){c.set(b,e);c.rot90CW()};this.ceil=function(){b=
Math.ceil(b);e=Math.ceil(e)};this.round=function(){b=Math.round(b);e=Math.round(e)};this.toString=function(){return"Vector2: "+b+", "+e};this.print=function(){trace("Vector2: "+b+", "+e)};this.getX=function(){return b};this.getY=function(){return e};this.rotate=function(c){var l=b,f=e;b=l*Math.cos(c)+f*Math.sin(c);e=l*-Math.sin(c)+f*Math.cos(c)};this._init(a,h)}
function CEdge(a,h,b,e){var c=null,l=null,f=null,g=null,k=null;this._init=function(q,p,B,t){this.set(q,p,B,t)};this.destroy=function(){k=g=f=l=c=null};this.render=function(q){q.moveTo(c.x,c.y);q.lineTo(l.x,l.y)};this.toString=function(q){trace(q+" "+c.x+" "+c.y+" "+l.x+" "+l.y)};this.add=function(q){c.addV(q);l.addV(q)};this.set=function(q,p,B,t){c=new CVector2;l=new CVector2;c.set(q,p);l.set(B,t);this.calculateNormal();this.calculateCenter()};this.scale=function(q){c.scalarProduct(q);l.scalarProduct(q);
this.calculateNormal();this.calculateCenter()};this.calculateNormal=function(){k=null;k=new CVector2;k.setV(l);k.subtract(c);k.rot90CCW();k.normalize()};this.calculateCenter=function(){f=null;f=centerBetweenPointsV2(c,l);g=new CVector2;g.setV(k);g.scalarProduct(5);g.addV(f)};this.getPointA=function(){return c};this.m_pCenter=function(){return f};this.getPointB=function(){return l};this.getNormal=function(){return k};this.renderNormal=function(q){q.moveTo(f.x,f.y);q.lineTo(g.x,g.y)};this._init(a,h,
b,e);return this}
function CArrow(a,h,b){var e,c,l,f,g,k,q,p,B;this._init=function(u,x){e=new createjs.Container;e.x=u;e.y=x;t.addChild(e);p=new createjs.Shape;p.graphics.beginFill("rgba(0,0,0,0.2)").drawCircle(0,0,2);e.addChild(p);B=new createjs.Shape;B.graphics.setStrokeDash([14,14],2);B.graphics.setStrokeStyle(5);B.graphics.beginStroke("rgba(255,255,255,1)");B.graphics.moveTo(0,0);B.graphics.lineTo(0,0);e.addChild(B);var A=s_oSpriteLibrary.getSprite("arrow");l=createBitmap(A);l.regY=.5*A.height;e.addChild(l);f=
createBitmap(s_oSpriteLibrary.getSprite("arrow_fill"));f.regY=.5*A.height;e.addChild(f);k=A.width;q=A.height;c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(l.x,l.y,0,q);c.regY=.5*q;e.addChild(c);A=s_oSpriteLibrary.getSprite("arrow_frame");g=createBitmap(A);g.regX=0;g.regY=.5*A.height;e.addChild(g);f.mask=c};this.unload=function(){t.removeChild(e)};this.setVisible=function(u){e.visible=u};this.setAngle=function(u){e.rotation=u};this.setPosition=function(u,x){e.x=u;e.y=x};this.setX=
function(u){e.x=u};this.setY=function(u){e.y=u};this.getX=function(){return e.x};this.getY=function(){return e.y};this.mask=function(u){c.graphics.clear();u=Math.floor(u*k/100);c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(l.x,l.y,u,q)};this.circle=function(u){u=Math.floor(u*k/100);p.graphics.clear();p.graphics.beginFill("rgba(0,0,0,0.2)").drawCircle(0,0,u);B.graphics.clear();B.graphics.setStrokeDash([14,14],2);B.graphics.setStrokeStyle(5);B.graphics.beginStroke("rgba(255,255,255,1)");B.graphics.moveTo(0,
0);B.graphics.lineTo(-u,0)};this.animateMask=function(u){var x=this;createjs.Tween.get(c.graphics.command).to({w:k},u,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(c.graphics.command).to({w:0},u,createjs.Ease.cubicInOut).call(function(){x.animateMask(u)})});createjs.Tween.get(p.graphics.command).to({radius:k},u,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(p.graphics.command).to({radius:0},u,createjs.Ease.cubicInOut)});createjs.Tween.get(B.graphics.command).to({x:-k},
u,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(B.graphics.command).to({x:0},u,createjs.Ease.cubicInOut)})};this.animateRotation=function(u){var x=this;createjs.Tween.get(e).to({rotation:35},u,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(e).to({rotation:-35},u,createjs.Ease.cubicInOut).call(function(){x.animateRotation(u)})})};var t=b;this._init(a,h);return this}
function CLevelScoreBoard(a,h,b){var e,c,l,f;this._init=function(g,k,q){e={x:k,y:q};c=new createjs.Container;c.x=e.x;c.y=e.y;s_oStage.addChild(c);l=createBitmap(g);l.x=0;l.y=0;l.regX=0;l.regY=0;c.addChild(l);f=new CTLText(c,.5*g.width-80,14,160,22,22,"center",TEXT_COLOR,FONT_GAME,1,0,0,"0 pt",!0,!0,!1,!1);f.setStroke(3,"#ff6000")};this.getStartPosition=function(){return e};this.setPosition=function(g,k){c.x=g;c.y=k};this.unload=function(){s_oStage.removeChild(c)};this.refresh=function(g){f.refreshText(g+
" "+TEXT_PT)};this._init(a,h,b);return this}
function CArrowPlayerSelected(a,h,b,e){var c,l;this._init=function(g,k,q){l=createBitmap(q);l.x=g;l.y=k;l.regX=.5*q.width;l.regY=.5*q.height;c=k;f.addChild(l)};this.unload=function(){this.removeTween();f.removeChild(l)};this.setVisible=function(g){l.visible=g};this.setPosition=function(g,k){l.x=g;c=l.y=k};this.animation=function(){var g=this;createjs.Tween.get(l).to({y:c+Y_POS_ARROW_SELECTED},400,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(l).to({y:c-Y_POS_ARROW_SELECTED},400,createjs.Ease.cubicOut).call(function(){g.animation()})})};
this.getX=function(){return l.x};this.getY=function(){return l.y};this.removeTween=function(){createjs.Tween.removeTweens(l)};var f=e;this._init(a,h,b);return this}
function CInvisibleCollision(a,h,b,e,c,l){var f,g,k,q,p,B,t,u,x;this._init=function(v,r,n,I,z){B=n;SHOW_COLLISION&&(n=new createjs.Graphics,n.beginFill(createjs.Graphics.getRGB(255,0,0)),n.drawCircle(0,0,z),k=new createjs.Shape(n),k.x=v,k.y=r,A.addChild(k));u=new CVector2;u.set(v,r);x=new CVector2;x.set(0,0);q=z;p=z*z;t=I;f=v;g=r};this.getX=function(){return u.getX()};this.getY=function(){return u.getY()};this.resetPos=function(){SHOW_COLLISION&&(k.x=f,k.y=g);u.set(f,g)};this.isGoalKeeper=function(){return!1};
this.setPosition=function(v,r){SHOW_COLLISION&&(null!==v&&(k.x=v),null!==r&&(k.y=r))};this.rotate=function(v){k.scaleX=v};this.setVisible=function(v){k.visible=v};this.unload=function(){SHOW_COLLISION&&A.removeChild(k)};this.vPos=function(){return u};this.getRadius=function(){return q};this.getID=function(){return B};this.type=function(){return t};this.getRadiusQuadro=function(){return p};this.getChildIndex=function(){SHOW_COLLISION&&A.getChildIndex(k)};this.setChildIndex=function(v){SHOW_COLLISION&&
A.setChildIndex(k,v)};this.getObject=function(){return SHOW_COLLISION?k:null};this.unload=function(){SHOW_COLLISION&&A.removeChild(k);k=null};var A=l;this._init(a,h,b,e,c);return this}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){var a=this._szMsg,h=3>a.length?!1:this._bEllipsis;if(h||this._bMultiline){var b=a.length-2,e=this._iStartingFontSize;this.__refreshTextFont(e);for(var c=this._oText.getBounds();c.height+this._iOutline>this._iEffectiveHeight||c.width+this._iOutline>this._iEffectiveWidth;){if(h&&e<this._iMinTextSize){if(b--,this._oText.text=a.slice(0,b)+"...",this.__updateY(),this.__verticalAlign(),1==b)break}else if(e--,this.__refreshTextFont(e),
this.__updateY(),this.__verticalAlign(),e<this._iMinTextSize&&!h)break;c=this._oText.getBounds()}this._iFontSize=e;this.__updateY();this.__verticalAlign();this.__updateStroke()}else this.__autofitLight()}},__autofitLight:function(){this.__refreshTextFont(this._iStartingFontSize);var a=Math.floor(linearFunction(this._iEffectiveWidth,this._oText.getBounds().width+this._iOutline,0,this._iStartingFontSize,0));a>this._iStartingFontSize?a=this._iStartingFontSize:a<this._iMinTextSize&&(a=this._iMinTextSize);
this.__refreshTextFont(a);this._iFontSize=a;this.__updateY();this.__verticalAlign();this.__updateStroke()},__refreshTextFont:function(a){this._oText.font=a+"px "+this._szFont;this._oText.lineHeight=Math.round(a*this._fLineHeightFactor)},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/
2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__updateStroke:function(){this._oStroke&&(this._oStroke.x=this._oText.x,this._oStroke.y=this._oText.y,this._oStroke.text=this._oText.text,this._oStroke.font=this._oText.font,this._oStroke.lineHeight=this._oText.lineHeight)},__updateOutline:function(){this._iOutline=this._oStroke&&this._oStroke.outline>this._oText.outline?this._oStroke.outline:this._oText.outline},__updateAlign:function(){switch(this._szAlign){case "center":this._oText.x=
this._iWidth/2;break;case "left":this._oText.x=this._iPaddingH;break;case "right":this._oText.x=this._iWidth-this._iPaddingH}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,130,0,0.5)").drawRect(0,0,this._iWidth,this._iHeight).moveTo(this._iPaddingH,this._iHeight-this._iPaddingV).lineTo(this._iWidth-this._iPaddingH,this._iHeight-this._iPaddingV).lineTo(this._iWidth-this._iPaddingH,this._iPaddingV).lineTo(this._iPaddingH,
this._iPaddingV).closePath().beginFill("rgba(255,0,0,0.5)").drawRect(this._iPaddingH,this._iPaddingV,this._iEffectiveWidth,this._iEffectiveHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;this.__updateAlign();
this._oContainer.addChild(this._oText);this.refreshText(a)},setScale:function(a){this._oContainer.scale=a},setStroke:function(a,h){this._oStroke||(this._oStroke=this._oText.clone(),this._oContainer.addChild(this._oStroke),this._oContainer.swapChildren(this._oStroke,this._oText));this.setStrokeColor(h?h:this._szStrokeColor);this.setStrokeSize(a?a:this._iStrokeSize)},setStrokeColor:function(a){this._szStrokeColor=a;this._oStroke&&(this._oStroke.color=this._szStrokeColor)},setStrokeSize:function(a){this._iStrokeSize=
a;this._oStroke&&(this._oStroke.outline=this._iStrokeSize,this.__updateOutline(),this.__autofit())},removeStroke:function(){this._oStroke&&(this._oContainer.removeChild(this._oStroke),this._oStroke=null,this.__updateOutline(),this.__autofit())},roll:function(a,h,b,e,c,l){h=null==h?1500:h;b=null==b?createjs.Ease.linear:b;if(this._oText){var f={score:parseInt(this._szMsg)};this._szMsg=a;var g=this._bFitText?function(){this._oText.text=Math.floor(f.score);this.__autofitLight()}:function(){this._oText.text=
Math.floor(f.score)};this._oTweenRollText=createjs.Tween.get(f).to({score:a},h,b);this._oTweenRollText.on("change",g,this);this._oTweenRollText.on("complete",function(){e&&e.apply(c,l);this.stopRolling()},this,!0)}},isRolling:function(){return null==this._oTweenRollText?!1:!0},stopRolling:function(){this.isRolling()&&(this._oTweenRollText.removeAllEventListeners(),this._oTweenRollText.paused=!0,this._oTweenRollText=null)},pauseRolling:function(){this.isRolling()&&(this._oTweenRollText.paused=!0)},
resumeRolling:function(){this.isRolling()&&(this._oTweenRollText.paused=!1)},setY:function(a){this._oContainer.y=a},setX:function(a){this._oContainer.x=a},setPosition:function(a,h){this._oContainer.x=a;this._oContainer.y=h},setAlign:function(a){this._szAlign=a;this._oText.textAlign=this._szAlign;this.__updateAlign()},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){this._oText&&(this._oText.outline=a,this.__updateOutline())},setShadow:function(a,h,b,e){this._oText&&(this._oText.shadow=
new createjs.Shadow(a,h,b,e))},setColor:function(a){this._szColor=a;this._oText.color=this._szColor},setAlpha:function(a){this._oContainer.alpha=a},setVisible:function(a){this._oContainer.visible=a},setFontSize:function(a){this._iFontSize=this._iStartingFontSize=a;this.refreshText(this._szMsg)},removeTweens:function(){createjs.Tween.removeTweens(this._oContainer)},getText:function(){return this._oText},getTextWidth:function(){return this._oText.getBounds().width+this._iOutline},getTextHeight:function(){return this._oText.getBounds().height+
this._iOutline},getMsg:function(){return this._szMsg},getX:function(){return this._oContainer.x},getY:function(){return this._oContainer.y},getHeight:function(){return this._iHeight},getWidth:function(){return this._iWidth},getColor:function(){return this._szColor},getFontSize:function(){return this._iFontSize},getContainer:function(){return this._oContainer},unload:function(){this.stopRolling();this._oParentContainer.removeChild(this._oContainer)},refreshText:function(a){this._szMsg=a;""===this._szMsg&&
(this._szMsg=" ");null===this._oText&&this.__createText(this._szMsg);this._oText.text=this._szMsg;this.__refreshTextFont(this._iStartingFontSize);this.__autofit()}};
function CTLText(a,h,b,e,c,l,f,g,k,q,p,B,t,u,x,A,v,r,n){r=void 0===r?11:r;n=void 0===n?!0:n;this._oParentContainer=a;this._oContainer=new createjs.Container;this._oContainer.x=h;this._oContainer.y=b;this._oParentContainer.addChild(this._oContainer);this._iOutline=0;this._iWidth=e;this._iHeight=c;this._bMultiline=A;this._iStartingFontSize=this._iFontSize=l;this._szAlign=f;this._szColor=g;this._szFont=k;this._iPaddingH=p;this._iPaddingV=B;this._iEffectiveWidth=this._iWidth-2*this._iPaddingH;this._iEffectiveHeight=
this._iHeight-2*this._iPaddingV;this._bVerticalAlign=x;this._bFitText=u;this._iMinTextSize=r;this._bDebug=v;this._bEllipsis=n;this._oDebugShape=null;this._fLineHeightFactor=q;this._oText=null;t&&this.__createText(t)}function extractHostname(a){a=-1<a.indexOf("://")?a.split("/")[2]:a.split("/")[0];a=a.split(":")[0];return a=a.split("?")[0]}function extractRootDomain(a){a=extractHostname(a);var h=a.split("."),b=h.length;2<b&&(a=h[b-2]+"."+h[b-1]);return a}
var getClosestTop=function(){var a=window,h=!1;try{for(;a.parent.document!==a.document;)if(a.parent.document)a=a.parent;else{h=!0;break}}catch(b){h=!0}return{topFrame:a,err:h}},getBestPageUrl=function(a){var h=a.topFrame,b="";if(a.err)try{try{b=window.top.location.href}catch(c){var e=window.location.ancestorOrigins;b=e[e.length-1]}}catch(c){b=h.document.referrer}else b=h.location.href;return b},TOPFRAMEOBJ=getClosestTop(),PAGE_URL=getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy(){for(var a=extractRootDomain(PAGE_URL),h=[String.fromCharCode(99,111,100,101,116,104,105,115,108,97,98,46,99,111,109),String.fromCharCode(101,110,118,97,116,111,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,110,101,116)],b=0;b<h.length;b++)if(h[b]===a)return!0;return!0};